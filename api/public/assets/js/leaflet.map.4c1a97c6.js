(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["leaflet.map"],{"5d41":function(t,a,e){var o=e("23e7"),i=e("861d"),n=e("825a"),r=e("c60d"),c=e("06cf"),s=e("e163");function l(t,a){var e,o,d=arguments.length<3?t:arguments[2];return n(t)===d?t[a]:(e=c.f(t,a),e?r(e)?e.value:void 0===e.get?void 0:e.get.call(d):i(o=s(t))?l(o,a,d):void 0)}o({target:"Reflect",stat:!0},{get:l})},"6f6b":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"map"},[e("v-btn",{staticClass:"map-button",staticStyle:{position:"fixed"},attrs:{title:"My location","aria-label":"My location",fab:"",small:""},on:{click:function(a){return t.toggleTracking()}}},[t.tracking?e("v-icon",[t._v("gps_off")]):e("v-icon",[t._v("gps_fixed")])],1),e("div",{staticClass:"map",attrs:{id:"leaflet-map"}}),e("v-overlay",{attrs:{absolute:!0,opacity:.5,"z-index":199,value:t.loading}},[e("v-progress-circular",{attrs:{indeterminate:"",size:64}})],1)],1)},i=[],n=(e("d81d"),e("e11e")),r=(e("4160"),e("b0c0"),e("0613")),c=e("d4ec"),s=e("bee2"),l=e("7e84");e("e439"),e("5d41");function d(t,a){while(!Object.prototype.hasOwnProperty.call(t,a))if(t=Object(l["a"])(t),null===t)break;return t}function u(t,a,e){return u="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,a,e){var o=d(t,a);if(o){var i=Object.getOwnPropertyDescriptor(o,a);return i.get?i.get.call(e):i.value}},u(t,a,e||t)}var p=e("2caf"),h=e("262e"),m=e("5033"),f=function(t){Object(h["a"])(e,t);var a=Object(p["a"])(e);function e(){return Object(c["a"])(this,e),a.apply(this,arguments)}return Object(s["a"])(e,[{key:"createTile",value:function(t,a){var o=u(Object(l["a"])(e.prototype),"createTile",this).call(this,t,a);return m["a"].fetchImage("tile-"+t.x+"-"+t.y+"-"+t.z,o.src,"png").then((function(t){o.src=t})),o.src="",o}}]),e}(n["TileLayer"]),g={name:"Cartodb",url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}.png"},k=[{name:"OpenCycleMap",url:"https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Transport",url:"https://tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Landscape",url:"https://tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Outdoors",url:"https://tile.thunderforest.com/outdoors/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Transport Dark",url:"https://tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Spinal Map",url:"https://tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Pioneer",url:"https://tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Mobile Atlas",url:"https://tile.thunderforest.com/mobile-atlas/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"},{name:"Neighbourhood",url:"https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=f570d731fdd34004a64587d87a02c81d"}],y=function(t){var a=n["control"].layers().addTo(t),e=new f(g.url,{crossOrigin:!0});t.addLayer(e),a.addBaseLayer(e,g.name),r["a"].state.online&&k.forEach((function(t){a.addBaseLayer(new n["TileLayer"](t.url),t.name)}))},v=e("b922"),b=(e("b680"),e("7a36")),L=e("a005"),T=function t(){Object(c["a"])(this,t),this.trail=new n["Polyline"]([])},w=function(){function t(){Object(c["a"])(this,t),this.map=null,this.trackingId=null,this.shouldGoToLocation=!0,this.location=new T}return Object(s["a"])(t,[{key:"toggleTracking",value:function(){var t=this;return this.trackingId?(r["a"].dispatch("snackbar/show","GPS location disabled."),b["a"].unregisterCallback(this.trackingId),this.trackingId=null,this.shouldGoToLocation=!0,this.eraseLocationData(),!1):(r["a"].dispatch("snackbar/show","Getting location,<br>this may take some time ..."),this.trackingId=b["a"].registerCallback((function(a){t.moveMarker(a)})),!0)}},{key:"isTracking",value:function(){return!!this.trackingId}},{key:"moveMarker",value:function(t){if(t){this.location.circle&&(this.location.circle.remove(),delete this.location.circle),this.location.marker&&(this.location.marker.remove(),delete this.location.marker);var a=[t.latitude,t.longitude],e=t.accuracy;e>10&&(this.location.circle=new n["Circle"](a,{radius:e,stroke:!1}),this.map&&this.location.circle.addTo(this.map)),this.location.marker=new n["Marker"](a),this.map&&this.location.marker.addTo(this.map).bindTooltip("My Location<br>Accuracy: "+e.toFixed(2)+"m"),L["a"].currentLocation.default(this.location.marker),e<100&&this.location.trail.addLatLng(a),this.shouldGoToLocation&&(this.goToLocation(),this.shouldGoToLocation=!1)}}},{key:"goToLocation",value:function(){this.map&&this.location.marker&&(this.map.setView(this.location.marker.getLatLng(),12),this.location.marker.openTooltip())}},{key:"setMap",value:function(t){this.map=t,this.trackingId&&this.location.trail.addTo(this.map),this.trackingId&&this.location.circle&&this.location.circle.addTo(this.map),this.trackingId&&this.location.marker&&this.location.marker.addTo(this.map)}},{key:"removeMap",value:function(){this.removeLocationFromMap(),this.map=null}},{key:"removeLocationFromMap",value:function(){this.map&&(this.location.circle&&this.location.circle.remove(),this.location.marker&&this.location.marker.remove(),this.location.trail.remove())}},{key:"eraseLocationData",value:function(){this.removeLocationFromMap(),this.location.trail=new n["Polyline"]([]),delete this.location.circle,delete this.location.marker}}]),t}(),x=new w,M=x,O=e("b005"),z={map:null,computed:{loading:function(){return this.$store.state.area.loading}},data:function(){return{tracking:!1}},created:function(){this.tracking=M.isTracking()},mounted:function(){var t=this,a=new n["LatLngBounds"](new n["LatLng"](89,-179),new n["LatLng"](-89,179));this.$options.map=new n["Map"]("leaflet-map",{noWrap:!0,maxZoom:18,minZoom:2,zoom:2,maxBounds:a,maxBoundsViscosity:1,center:[0,0],zoomControl:!1,renderer:new n["Canvas"]({tolerance:5})}),y(this.$options.map),v["a"].map=this.$options.map,M.setMap(this.$options.map),n["control"].zoom({position:"bottomright"}).addTo(this.$options.map),n["control"].scale().addTo(this.$options.map),this.$options.map.on("moveend",(function(){O["a"].state.left||(v["a"].lastMapBounds=t.$options.map.getBounds())}))},methods:{toggleTracking:function(){this.tracking=M.toggleTracking()}},destroyed:function(){v["a"].map=null,M.removeMap()}},j=z,C=e("2877"),I=e("6544"),$=e.n(I),B=e("8336"),P=e("132d"),G=e("a797"),V=e("490a"),_=Object(C["a"])(j,o,i,!1,null,null,null);a["default"]=_.exports;$()(_,{VBtn:B["a"],VIcon:P["a"],VOverlay:G["a"],VProgressCircular:V["a"]})},c60d:function(t,a,e){var o=e("5135");t.exports=function(t){return void 0!==t&&(o(t,"value")||o(t,"writable"))}}}]);
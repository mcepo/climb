(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myLocation.service"],{"7a36":function(t,i,a){"use strict";a("4160"),a("4ec9"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0");var o=a("d4ec"),e=a("bee2"),n=function(){function t(){Object(o["a"])(this,t),this.positionOptions={enableHighAccuracy:!0,maximumAge:1e4,timeout:1e3}}return Object(e["a"])(t,[{key:"startWatch",value:function(t){this._watchId||(this._watchId=navigator.geolocation.watchPosition((function(i){i&&t(i.coords,null)}),(function(i){t(null,i)}),this.positionOptions))}},{key:"stopWatch",value:function(){this._watchId&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=void 0)}}]),t}(),c=new n,s=c,r=a("1547"),l=Object(r["c"])("BackgroundGeolocation"),h=function(){function t(){Object(o["a"])(this,t)}return Object(e["a"])(t,[{key:"startWatch",value:function(t){var i=this;this._watcherId||l.addWatcher({backgroundMessage:"Displaying your trail in app",backgroundTitle:"Using GPS",requestPermissions:!0,stale:!1,distanceFilter:0},(function(i,a){a&&"NOT_AUTHORIZED"===a.code&&("Permission denied."===a.message&&window.confirm(a.message+"\n\nOpen settings now?")?l.openSettings():window.alert(a.message)),t(i,a)})).then((function(t){i._watcherId=t}))}},{key:"stopWatch",value:function(){this._watcherId&&(l.removeWatcher({id:this._watcherId}),this._watcherId=void 0)}}]),t}(),u=new h,d=u,k=function(){function t(i){Object(o["a"])(this,t),this._callbacks=new Map,this._callbackCounter=0,this._lastPosition=null,this._provider=i}return Object(e["a"])(t,[{key:"registerCallback",value:function(t){var i=this;return 0===this._callbacks.size&&this._provider.startWatch((function(t,a){i._lastPosition=t,i._processPosition(t,a)})),this._callbackCounter++,this._callbacks.set(this._callbackCounter,t),this._lastPosition&&this._processPosition(this._lastPosition,null),this._callbackCounter}},{key:"_processPosition",value:function(t,i){!i&&t&&this._callbacks.forEach((function(i){i(t)}))}},{key:"unregisterCallback",value:function(t){this._callbacks.delete(t),0===this._callbacks.size&&(this._provider.stopWatch(),this._lastPosition=null)}}]),t}(),m=r["a"].isNativePlatform()?d:s,p=new k(m);i["a"]=p},e9c3:function(t,i,a){"use strict";a.r(i),a.d(i,"MyLocationService",(function(){return h}));a("d81d"),a("b680");var o=a("bee2"),e=a("d4ec"),n=a("e11e"),c=a("0613"),s=a("7a36"),r=a("a005"),l=function t(){Object(e["a"])(this,t),this.trail=new n["Polyline"]([])},h=function(){function t(){Object(e["a"])(this,t),this.map=null,this.trackingId=null,this.shouldGoToLocation=!0,this.location=new l}return Object(o["a"])(t,[{key:"startTracking",value:function(t){var i=this;c["a"].dispatch("snackbar/show","Getting location,<br>this may take some time ..."),this.map=t,this.location.trail.addTo(this.map),this.trackingId&&this.location.circle&&this.location.circle.addTo(this.map),this.trackingId&&this.location.marker&&this.location.marker.addTo(this.map),!this.trackingId&&(this.trackingId=s["a"].registerCallback((function(t){i.moveMarker(t)})))}},{key:"stopTracking",value:function(){c["a"].dispatch("snackbar/show","GPS location disabled."),this.trackingId&&s["a"].unregisterCallback(this.trackingId),this.trackingId=null,this.shouldGoToLocation=!0,this.eraseLocationData()}},{key:"moveMarker",value:function(t){if(t){this.location.circle&&(this.location.circle.remove(),delete this.location.circle),this.location.marker&&(this.location.marker.remove(),delete this.location.marker);var i=[t.latitude,t.longitude],a=t.accuracy;a>10&&(this.location.circle=new n["Circle"](i,{radius:a,stroke:!1}),this.map&&this.location.circle.addTo(this.map)),this.location.marker=new n["Marker"](i),this.map&&this.location.marker.addTo(this.map).bindTooltip("My Location<br>Accuracy: "+a.toFixed(2)+"m").openTooltip(),r["a"].currentLocation.default(this.location.marker),a<100&&this.location.trail.addLatLng(i),this.shouldGoToLocation&&(this.goToLocation(),this.shouldGoToLocation=!1)}}},{key:"goToLocation",value:function(){this.map&&this.location.marker&&(this.map.setView(this.location.marker.getLatLng(),12),this.location.marker.openTooltip())}},{key:"removeMap",value:function(){this.removeLocationFromMap(),this.map=null}},{key:"removeLocationFromMap",value:function(){this.map&&(this.location.circle&&this.location.circle.remove(),this.location.marker&&this.location.marker.remove(),this.location.trail.remove())}},{key:"eraseLocationData",value:function(){this.removeLocationFromMap(),this.location.trail=new n["Polyline"]([]),delete this.location.circle,delete this.location.marker}}]),t}(),u=new h;i["default"]=u}}]);
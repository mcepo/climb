(function(t){function e(e){for(var n,r,s=e[0],c=e[1],u=e[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);m&&m(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var s=a[r];0!==i[s]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},i={app:0},o=[];function s(t){return c.p+"js/"+({"admin.panel~area.form~moderator.form~route.filters~route.form":"admin.panel~area.form~moderator.form~route.filters~route.form","admin.panel":"admin.panel","area.form~pitch.form~route.filters~route.form":"area.form~pitch.form~route.filters~route.form","area.form":"area.form","route.filters":"route.filters","route.form":"route.form","moderator.form":"moderator.form","pitch.form":"pitch.form","change-password.form":"change-password.form","chart-js":"chart-js","drawing.service":"drawing.service","image.map":"image.map","image.upload":"image.upload","leaflet.map":"leaflet.map","login.form":"login.form","privacy.policy":"privacy.policy","register.form":"register.form","popup.service":"popup.service","myLocation.service":"myLocation.service"}[t]||t)+"."+{"admin.panel~area.form~moderator.form~route.filters~route.form":"ee15d4fc","admin.panel":"fc6c815c","area.form~pitch.form~route.filters~route.form":"42e79346","area.form":"20e057ae","route.filters":"77741a70","route.form":"cab6e057","moderator.form":"65c0213a","pitch.form":"dfd5c454","change-password.form":"b1e8e4f3","chart-js":"8df02068","chunk-2d0a4885":"0688844a","chunk-2d208e4e":"23a09d7a","chunk-601f2513":"562f6ea2","drawing.service":"532de07c","image.map":"13ba24fc","image.upload":"c90dd13d","leaflet.map":"e6c8b727","login.form":"19924a95","privacy.policy":"af297deb","register.form":"e14b8b05","popup.service":"06c7ba15","myLocation.service":"c4180e20","chunk-2d0d0f2c":"cedb5058"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a={"admin.panel~area.form~moderator.form~route.filters~route.form":1,"admin.panel":1,"area.form~pitch.form~route.filters~route.form":1,"area.form":1,"route.filters":1,"moderator.form":1,"pitch.form":1,"drawing.service":1,"image.upload":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var n="css/"+({"admin.panel~area.form~moderator.form~route.filters~route.form":"admin.panel~area.form~moderator.form~route.filters~route.form","admin.panel":"admin.panel","area.form~pitch.form~route.filters~route.form":"area.form~pitch.form~route.filters~route.form","area.form":"area.form","route.filters":"route.filters","route.form":"route.form","moderator.form":"moderator.form","pitch.form":"pitch.form","change-password.form":"change-password.form","chart-js":"chart-js","drawing.service":"drawing.service","image.map":"image.map","image.upload":"image.upload","leaflet.map":"leaflet.map","login.form":"login.form","privacy.policy":"privacy.policy","register.form":"register.form","popup.service":"popup.service","myLocation.service":"myLocation.service"}[t]||t)+"."+{"admin.panel~area.form~moderator.form~route.filters~route.form":"f058a909","admin.panel":"2ab20800","area.form~pitch.form~route.filters~route.form":"f9d4f751","area.form":"09316a61","route.filters":"09316a61","route.form":"31d6cfe0","moderator.form":"d3de4bc2","pitch.form":"207437e9","change-password.form":"31d6cfe0","chart-js":"31d6cfe0","chunk-2d0a4885":"31d6cfe0","chunk-2d208e4e":"31d6cfe0","chunk-601f2513":"31d6cfe0","drawing.service":"8c7a4794","image.map":"31d6cfe0","image.upload":"640da394","leaflet.map":"31d6cfe0","login.form":"31d6cfe0","privacy.policy":"31d6cfe0","register.form":"31d6cfe0","popup.service":"31d6cfe0","myLocation.service":"31d6cfe0","chunk-2d0d0f2c":"31d6cfe0"}[t]+".css",i=c.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===i))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===n||l===i)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var n=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete r[t],m.parentNode.removeChild(m),a(o)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){r[t]=0})));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(m);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",d.name="ChunkLoadError",d.type=n,d.request=r,a[1](d)}i[t]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/assets/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var m=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"001f":function(t,e,a){},"0613":function(t,e,a){"use strict";a.d(e,"b",(function(){return p}));a("4160"),a("a15b"),a("d81d"),a("fb6a"),a("45fc"),a("b0c0"),a("a9e3"),a("8ba4"),a("ac1f"),a("5319"),a("1276"),a("159b");var n=a("2b0e"),r=a("2f62"),i=a("f33f"),o=a("5530"),s=a("53ca"),c=a("17b6"),u=a("e762"),l=function(t){var e="state";c["b"].readFile({path:e,directory:c["a"].Cache}).then((function(e){var a=e.data;if(a){var n=JSON.parse(Object(u["a"])(a));if("object"===Object(s["a"])(n)&&null!==n){var r=t.state.auth;void 0!==(null===r||void 0===r?void 0:r.user)&&(n=Object(o["a"])({},n,{auth:r})),"object"===Object(s["a"])(n)&&t.replaceState(Object(o["a"])({},t.state,{},n))}}}));var a,n=300;function r(t){var a={auth:t.auth,area:t.area,route:t.route,image:t.image,trail:t.trail,pitch:t.pitch};c["b"].writeFile({path:e,data:Object(u["b"])(JSON.stringify(a)),directory:c["a"].Cache})}t.subscribe((function(t,e){a&&clearTimeout(a),a=setTimeout((function(){return r(e)}),n)}))},d=a("37a5"),m=a("b005");n["a"].use(r["a"]);var f=18e4;function p(t,e){if(t&&Number.isInteger(t)){var a=Date.now()-t;if(a<f)return e("loading",!1),setTimeout((function(){m["a"].setLeft(!0)}),1e3),!1}return!t&&e("loading",!0),!0}var h=new r["a"].Store({state:{drawing:!1,online:navigator.onLine,tracking:!1},plugins:[l],mutations:{setDrawingMode:function(t,e){t.drawing=e},updateOnlineStatus:function(t,e){t.online=e},tracking:function(t,e){t.tracking=e}},getters:{tags:function(t,e){var a;return e.loading?[]:(null===(a=t.url)||void 0===a?void 0:a.params.imageId)?e["image/tags"]:e["area/tags"]},imageOpen:function(t){var e;return null===(e=t.url)||void 0===e?void 0:e.params.imageId},hasTag:function(t,e){return function(t){return e.tags.some((function(e){return t===e.tagged_type+e.tagged_id}))}},loading:function(t){var e,a,n;return(null===(e=t.area)||void 0===e?void 0:e.loading)||(null===(a=t.route)||void 0===a?void 0:a.loading)||(null===(n=t.image)||void 0===n?void 0:n.loading)},breadcrumbs:function(t,e){var a=e["area/get"],n=[];if(a){var r=a.ancestors||null;if(r){var i=r.slice();i.push(a.id),i.forEach((function(e){var a,r=null===(a=t.area)||void 0===a?void 0:a.byIds[e];r&&n.push(r)}))}}var o=e["route/get"];return o&&n.push(o),n},urlPath:function(t){return function(e,a){var n,r=null===(n=t[e])||void 0===n?void 0:n.byIds[a];if(Object(d["a"])(),!r)return null;var i=r.path?r.path.split(".").map((function(t){return parseInt(t)})):[],o=[];return i.forEach((function(e){var a,n=null===(a=t.area)||void 0===a?void 0:a.byIds[e];n&&o.push(n.name)})),r.name&&(Object(d["a"])(r.name),o.push(r.name)),o.join("-").toLowerCase().replace(/[^a-zđčćžš0-9\s\\-]/g,"").replace(/\s/g,"_")}}},modules:i["default"]});window.addEventListener("online",(function(){h.commit("updateOnlineStatus",!0),h.dispatch("snackbar/success","Online!")})),window.addEventListener("offline",(function(){h.commit("updateOnlineStatus",!1),h.dispatch("snackbar/error","Working offline!")}));e["a"]=h},"0670":function(t,e,a){"use strict";var n=a("2b0e"),r=a("f309"),i=a("c3f0");n["a"].use(r["a"],{directives:{Touch:i["a"]}});var o=new r["a"]({icons:{iconfont:"md"}});e["a"]=o},"0790":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{directives:[{name:"touch",rawName:"v-touch",value:{left:function(){return t.swipeLeft()}},expression:"{\n        left: () => swipeLeft()\n      }"}],staticStyle:{"z-index":"200"},attrs:{app:"",clipped:"",width:"400",id:"drawerLeft","fill-height":"",stateless:""},model:{value:t.leftDrawer,callback:function(e){t.leftDrawer=e},expression:"leftDrawer"}},[a("router-view")],1),a("v-app-bar",{staticStyle:{"z-index":"900"},attrs:{app:"","clipped-right":"","clipped-left":""}},[a("v-app-bar-nav-icon",{on:{click:function(e){return e.stopPropagation(),t.toggleLeft()}}}),a("ancestor-breadcrumbs",{attrs:{trim:3}}),a("v-spacer"),a("v-menu",{attrs:{left:"",bottom:"","close-on-click":!0,"close-on-content-click":!0,"z-index":"901"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{"aria-label":"Toggle menu",icon:""}},"v-btn",r,!1),n),[a("v-icon",[t._v("more_vert")])],1)]}}])},[t.checkAuth()?a("v-list",[a("v-list-item",[a("v-list-item-title",[a("v-icon",[t._v("perm_identity")]),t._v(t._s(t.getUserName()))],1)],1),a("v-divider"),a("v-list-item",{on:{click:function(e){return t.$router.push("/privacy")}}},[a("v-list-item-title",[t._v("Privacy policy")])],1),a("v-divider"),a("v-list-item",{on:{click:function(e){return t.openAuthorizedForm({form:{component:"change-password-form",params:null}})}}},[a("v-list-item-title",[t._v("Change password")])],1),a("v-list-item",{on:{click:function(e){return t.logout()}}},[a("v-list-item-title",[t._v("Logout")])],1),a("v-divider"),t.installable?a("v-list-item",{on:{click:function(e){return t.installApp()}}},[a("v-list-item-title",[a("v-icon",[t._v("mobile_friendly")]),t._v("Install app")],1)],1):t._e(),a("v-list-item",{on:{click:function(e){return t.$router.push("/admin")}}},[a("v-list-item-title",[a("v-icon",[t._v("build")]),t._v("Admin area")],1)],1)],1):a("v-list",[a("v-list-item",{on:{click:function(e){return t.openForm({component:"login-form",params:null})}}},[a("v-list-item-title",[t._v("Sign in / Register")])],1),a("v-divider"),a("v-list-item",{on:{click:function(e){return t.$router.push("/privacy")}}},[a("v-list-item-title",[t._v("Privacy policy")])],1),t.installable?a("v-divider"):t._e(),t.installable?a("v-list-item",{on:{click:function(e){return t.installApp()}}},[a("v-list-item-title",[a("v-icon",[t._v("mobile_friendly")]),t._v("Install app")],1)],1):t._e()],1)],1)],1),a("v-navigation-drawer",{staticStyle:{"z-index":"201"},attrs:{right:"",clipped:"",app:"",width:"400","disable-resize-watcher":"","disable-route-watch":"",stateless:""},model:{value:t.rightDrawer,callback:function(e){t.rightDrawer=e},expression:"rightDrawer"}},[a("form-layout")],1)],1)},r=[],i=a("5530"),o=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"pb-10",attrs:{flat:""}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-spacer"),t.formComponent?a("v-btn",{attrs:{text:"",icon:"",title:"Close"},on:{click:function(e){return e.stopPropagation(),t.closeForm.apply(null,arguments)}}},[a("v-icon",[t._v("close")])],1):t._e()],1),a(t.formComponent,t._b({tag:"component"},"component",t.formParams,!1))],1)},c=[],u=(a("d3b7"),a("2f62")),l={computed:Object(i["a"])({},Object(u["e"])({formComponent:function(t){return t.form.component},formParams:function(t){return t.form.params}})),methods:Object(i["a"])({},Object(u["b"])({closeForm:"form/close"})),components:{"area-form":function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("area.form~pitch.form~route.filters~route.form"),a.e("area.form")]).then(a.bind(null,"732e"))},"route-form":function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("area.form~pitch.form~route.filters~route.form"),a.e("route.form")]).then(a.bind(null,"c886"))},"image-upload-form":function(){return a.e("image.upload").then(a.bind(null,"cf0c"))},"route-filters-form":function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("area.form~pitch.form~route.filters~route.form"),a.e("route.filters")]).then(a.bind(null,"45c7"))},"pitch-form":function(){return Promise.all([a.e("area.form~pitch.form~route.filters~route.form"),a.e("pitch.form")]).then(a.bind(null,"a94b"))},"moderator-form":function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("moderator.form")]).then(a.bind(null,"1a3c"))},"login-form":function(){return a.e("login.form").then(a.bind(null,"83c9"))},"register-form":function(){return a.e("register.form").then(a.bind(null,"f102"))},"change-password-form":function(){return a.e("change-password.form").then(a.bind(null,"2864"))}}},d=l,m=a("2877"),f=a("6544"),p=a.n(f),h=a("8336"),g=a("b0af"),v=a("132d"),b=a("2fa4"),y=a("71d9"),I=Object(m["a"])(d,s,c,!1,null,null,null),_=I.exports;p()(I,{VBtn:h["a"],VCard:g["a"],VIcon:v["a"],VSpacer:b["a"],VToolbar:y["a"]});var w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex align-center"},[a("v-btn",{attrs:{icon:"",text:""},on:{click:function(e){return t.open(null)}}},[a("v-icon",[t._v("home")])],1),a("v-breadcrumbs",{staticClass:"pa-0",attrs:{items:t.breadcrumbs,divider:"/"},scopedSlots:t._u([{key:"item",fn:function(e){return[a("a",{on:{click:function(a){return t.open(e.item)}}},[t._v(t._s(e.item.name))])]}}])})],1)},k=[],A=(a("fb6a"),a("a9e3"),a("498a"),a("afbc")),x=a("5d57"),O=a("b005"),T={props:{trim:Number},computed:{breadcrumbs:function(){var t=this.$store.getters.breadcrumbs||[],e=t.length-this.trim;return(e<0||!this.$vuetify.breakpoint.xs)&&(e=0),this.trim?t.slice(e,t.length):t}},methods:{open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?t.area_id?t.id!==parseInt(this.$store.state.url.params.routeId)&&this.$router.push(Object(A["b"])(x["b"].Route,t.id)):t.id!==parseInt(this.$store.state.url.params.areaId)&&this.$router.push(Object(A["b"])(x["b"].Area,t.id)):"/"!==this.$route.path&&this.$router.push(Object(A["b"])(x["b"].Area,null)),O["a"].setLeft(!0),O["a"].setRight(!1)}}},C=T,V=a("2bc5"),j=Object(m["a"])(C,w,k,!1,null,null,null),L=j.exports;p()(j,{VBreadcrumbs:V["a"],VBtn:h["a"],VIcon:v["a"]});var E=o["a"].extend({deferredPrompt:null,data:function(){return{installed:!1,hasDeferrerPrompt:!1}},computed:{installable:function(){return!this.installed&&this.hasDeferrerPrompt},rightDrawer:{get:function(){return O["a"].state.right},set:function(t){O["a"].state.right=t}},leftDrawer:{get:function(){return O["a"].state.left},set:function(t){O["a"].state.left=t}}},created:function(){var t=this;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),t.$options.deferredPrompt=e,t.hasDeferrerPrompt=!0})),window.addEventListener("appinstalled",(function(){t.$store.dispatch("snackbar/success","Succesfully installed, enjoy!")})),window.addEventListener("DOMContentLoaded",(function(){t.installed=navigator.standalone||window.matchMedia("(display-mode: standalone)").matches}))},methods:Object(i["a"])({},Object(u["b"])({openForm:"form/open",openAuthorizedForm:"form/authorizeAndOpen",logout:"auth/logout"}),{},Object(u["c"])({checkAuth:"auth/check",getUserName:"auth/username"}),{swipeLeft:function(){O["a"].setLeft(!1)},toggleLeft:function(){O["a"].setLeft(!O["a"].state.left)},installApp:function(){var t=this;this.$options.deferredPrompt.prompt(),this.$options.deferredPrompt.userChoice.then((function(e){"accepted"===e.outcome?t.$store.dispatch("snackbar/success","Instaling on home screen"):t.$store.dispatch("snackbar/error","Not installing :(")}))}}),components:{FormLayout:_,AncestorBreadcrumbs:L}}),S=E,M=a("40dc"),$=a("5bc1"),P=a("ce7e"),F=a("8860"),D=a("da13"),R=a("5d23"),B=a("e449"),z=a("f774"),N=a("269a"),W=a.n(N),G=a("c3f0"),X=Object(m["a"])(S,n,r,!1,null,null,null);e["a"]=X.exports;p()(X,{VAppBar:M["a"],VAppBarNavIcon:$["a"],VBtn:h["a"],VDivider:P["a"],VIcon:v["a"],VList:F["a"],VListItem:D["a"],VListItemTitle:R["c"],VMenu:B["a"],VNavigationDrawer:z["a"],VSpacer:b["a"]}),W()(X,{Touch:G["a"]})},"07a8":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("d81d"),a("13d5");var n=a("ade3"),r=a("5530");function i(t,e){return Object(r["a"])({},t,{},e.reduce((function(e,a){var i;return Object(r["a"])({},e,Object(n["a"])({},a,Array.isArray(t[a])?t[a].map((function(t){return t.id})):null===(i=t[a])||void 0===i?void 0:i.id))}),{}))}},"0994":function(t,e,a){},"09e0":function(t,e,a){},1344:function(t,e,a){"use strict";a("e127")},"14c2":function(t,e,a){"use strict";a("001f")},"151c":function(t,e,a){"use strict";a.r(e);var n=a("5530"),r=a("70c7"),i=!0,o={namespaced:i,state:{byIds:{},allIds:[]},mutations:Object(n["a"])({},r["a"]),getters:{find:function(t){return function(e){return t.byIds[e]}}}};e["default"]=o},"158d":function(t,e,a){"use strict";a.r(e);a("4160"),a("a15b"),a("fb6a"),a("159b");var n=a("5530"),r=a("0613"),i=a("842b"),o=a("07a8");a("caad"),a("b0c0"),a("2532"),a("2ca0");function s(t,e){if(e.path&&!t.path.startsWith(e.path))return!1;if(e.length&&(t.length<e.length[0]||t.length>e.length[1]))return!1;for(var a in t.grades){var n=t.grades[a][0],r=t.grades[a][1];if(e.gradeTypes&&e.gradeTypes.includes(n))return!1;if(e.gradeWeights&&e.gradeWeights[n]&&(e.gradeWeights[n][0]>r||e.gradeWeights[n][1]<r))return!1}return!(e.query&&!t.name.toLocaleLowerCase().includes(e.query.toLocaleLowerCase()))}var c=a("70c7"),u=!0,l={namespaced:u,state:{byIds:{},allIds:[],loading:!1,filters:{}},mutations:Object(n["a"])({},c["a"],{setFilters:function(t,e){t.filters=Object(n["a"])({},e,{query:t.filters.query||null})},setQueryString:function(t,e){t.filters=Object(n["a"])({},t.filters,{query:e})},updatePosition:function(t,e){var a=e.id,n=e.position;t.byIds[a].position=n},appendPitch:function(t,e){t.byIds[e.routeId].pitches.push(e.pitchId)}}),actions:{storeRelation:function(t,e){var a=t.commit,n=e.items,r=e.commitFun,i=e.root,o=void 0!==i&&i;for(var s in n)a(r,n[s],{root:o})},normalizeData:function(t,e){var a=t.commit,n=t.dispatch;a("add",Object(o["a"])(e,["ancestors","pitches","images"])),e.pitches&&n("storeRelation",{items:e.pitches,commitFun:"pitch/add",root:!0}),e.ancestors&&n("storeRelation",{items:e.ancestors,commitFun:"area/add",root:!0}),e.images&&n("storeRelation",{items:e.images,commitFun:"image/add",root:!0})},fetch:function(t,e){var a,n=t.state,o=t.commit,s=t.dispatch;Object(r["b"])(null===(a=n.byIds[e])||void 0===a?void 0:a.fullyLoaded,o)&&i["a"].get("route/"+e).then((function(t){var e=t.data;e.fullyLoaded=Date.now(),s("normalizeData",e),s("area/fetch",e.area_id,{root:!0}),o("loading",!1)})).catch((function(){o("loading",!1)}))},loadFiltered:function(t){var e,a=t.state,n=t.commit,r=t.getters,o=t.rootGetters,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!a.loading){s&&n("setFilters",s);var c=o["area/get"];if(!c||!(null===(e=c.routes)||void 0===e?void 0:e.length)){n("loading",!0);var u=r.filters;u.offset=r.getFiltered.length,i["a"].get("route",{params:u}).then((function(t){var e=t.data;e.forEach((function(t){n("add",t)})),n("loading",!1)})).catch((function(){n("loading",!1)}))}}}},getters:{get:function(t,e,a){var n;return(null===(n=a.url)||void 0===n?void 0:n.params.routeId)&&t.byIds[a.url.params.routeId]},filters:function(t,e,a,r){var i=r["area/get"],o=Object(n["a"])({},t.filters);if(i&&i.ancestors){var s=i.ancestors.slice();s.push(i.id),o.path=s.join(".")}return o},getFiltered:function(t,e,a,n){var r,i=n["area/get"],o=e.filters,c=[],u=i&&0!==(null===(r=i.routes)||void 0===r?void 0:r.length)?i.routes:t.allIds;return u?(u.forEach((function(e){var a=t.byIds[e];a&&s(a,o)&&c.push(a)})),c):[]},find:function(t){return function(e){return t.byIds[e]}}}};e["default"]=l},"2b56":function(t,e,a){"use strict";a("09e0")},"31ac":function(t,e,a){"use strict";a.r(e);a("99af"),a("4de4"),a("c740"),a("4160"),a("caad"),a("fb6a"),a("45fc"),a("a434"),a("b64b"),a("d3b7"),a("2532"),a("159b");var n=a("5530"),r=a("0613"),i=a("842b"),o=a("07a8"),s=a("70c7"),c=a("5d57");a("c975"),a("d81d"),a("b0c0");function u(t,e,a){if(a&&!t.name.toLocaleLowerCase().includes(a.toLocaleLowerCase()))return!1;if(e.length){var n=!1;for(var r in t.length_stats){var i=parseInt(r);if(i>=e.length[0]&&i<=e.length[1]){n=!0;break}}if(!n)return!1}if(e.orientation&&0!==e.orientation.length){var o=-1!==e.orientation.indexOf(t.orientation)||t.orientations&&e.orientation.some((function(e){return 0!==t.orientations[e]}));if(!o)return!1}if(e.gradeWeights){var s=!1,c=function(a){var n=e.gradeWeights[a];if(t.grade_stats[a]&&t.grade_stats[a]&&Object.keys(t.grade_stats[a]).map((function(t){return parseInt(t)})).some((function(t){return t>n[0]&&t<n[1]})))return s=!0,"break"};for(var u in e.gradeWeights){var l=c(u);if("break"===l)break}if(!s)return!1}return!0}var l=a("b005"),d=!0,m=["ancestors","areas","images","trails","moderators","routes"],f={namespaced:d,state:{byIds:{},allIds:[],loading:!0,searching:!1,rootIds:[],recentlyViewedIds:[]},mutations:Object(n["a"])({},s["a"],{searching:function(t,e){t.searching=e},appendArea:function(t,e){var a=e.parentId,n=e.areaId;if(a){var r=t.byIds[a];r&&r.areas&&!r.areas.includes(n)&&t.byIds[a].areas.push(n)}},appendRootIds:function(t,e){var a=e.areaId,n=t.byIds[a];n&&null===n.parent_id&&(t.rootIds.includes(a)||t.rootIds.push(a))},appendImage:function(t,e){t.byIds[e.id].images.push(e.imageId)},appendTrail:function(t,e){var a=t.byIds[e.id];Array.isArray(a.trails)||(a.trails=[]),t.byIds[e.id].trails.push(e.trailId)},updateRouteIds:function(t,e){t.byIds[e.id].routes=e.routes},removeArea:function(t,e){var a,n=e.parentId,r=e.areaId,i=t.byIds[n],o=i&&(null===(a=i.areas)||void 0===a?void 0:a.findIndex((function(t){return t===r})));o&&i.areas.splice(o,1)},addModerator:function(t,e){var a=e.area,n=e.moderator,r=t.byIds[a.id];r.moderators.push(n.id)},removeModerator:function(t,e){var a=e.area,n=e.moderator,r=t.byIds[a.id],i=r.moderators.findIndex((function(t){return t===n.id}));r.moderators.splice(i,1)},addRecentlyViewed:function(t,e){var a=t.recentlyViewedIds.filter((function(t){return t!==e}));a.unshift(e),a.length>8&&a.pop(),t.recentlyViewedIds=a}}),actions:{storeRelation:function(t,e){var a=t.commit,n=e.items,r=e.fun,i=e.root,o=void 0!==i&&i;for(var s in n)a(r,n[s],{root:o})},updateRoutePositions:function(t,e){for(var a=t.commit,n=e.id,r=e.routes,i=0;i<r.length;i++)a("route/updatePosition",{id:r[i],position:i+1},{root:!0});a("updateRouteIds",{id:n,routes:r})},normalizeData:function(t,e){var a=t.commit,n=t.dispatch;e.routes&&n("storeRelation",{items:e.routes,fun:"route/add",root:!0}),a("add",Object(o["a"])(e,m)),e.areas&&n("storeRelation",{items:e.areas,fun:"add"}),e.ancestors&&n("storeRelation",{items:e.ancestors,fun:"add"}),e.trails&&n("storeRelation",{items:e.trails,fun:"trail/add",root:!0}),e.images&&n("storeRelation",{items:e.images,fun:"image/add",root:!0}),e.moderators&&n("storeRelation",{items:e.moderators,fun:"user/add",root:!0})},fetch:function(t,e){var a,n=t.state,o=t.commit,s=t.dispatch;Object(r["b"])(null===(a=n.byIds[e])||void 0===a?void 0:a.fullyLoaded,o)&&i["a"].get("area/"+e).then((function(t){var e=t.data;e.fullyLoaded=Date.now(),s("normalizeData",e),e.type_id!==c["a"].Country&&o("addRecentlyViewed",e.id),l["a"].setLeft(!0);var a=e.parent_id&&e.ancestors.pop();a&&c["d"].mustLoadAsParent(a)?s("fetch",e.parent_id):o("loading",!1)})).catch((function(){o("loading",!1)}))},fetchMany:function(t,e){var a=t.commit;a(e?"searching":"loading",!0);var n=e?{query:e}:{};i["a"].get("area",{params:n}).then((function(t){var e=t.data;e.areas.forEach((function(t){a("add",t),null===t.parent_id&&a("appendRootIds",{areaId:t.id})})),l["a"].setLeft(!0)})).finally((function(){a(e?"searching":"loading",!1)}))}},getters:{get:function(t,e,a,n){var r,i,o=(null===(r=a.url)||void 0===r?void 0:r.params.areaId)||(null===(i=n["route/get"])||void 0===i?void 0:i.area_id);return o&&t.byIds[o]},find:function(t){return function(e){return t.byIds[e]}},getFiltered:function(t,e,a,n){return function(e,a){var r;if(a)r=Object.keys(t.byIds);else{if(!e)return[];r=t.byIds[e].areas}var i=[],o=n["route/filters"];return r&&r.forEach((function(e){var n=t.byIds[e];n&&u(n,o,a)&&i.push(n)})),i}},tags:function(t,e,a,n){var r=e.get,i=r,o=[];if(!r)return t.rootIds.forEach((function(e){var a;(null===(a=t.byIds[e])||void 0===a?void 0:a.map_tag)&&o.push(t.byIds[e].map_tag)})),o;o=o.concat(e.tagsFor(r)),r.trails&&r.trails.forEach((function(t){var e,n;(null===(n=null===(e=a.trail)||void 0===e?void 0:e.byIds[t])||void 0===n?void 0:n.map_tag)&&o.push(a.trail.byIds[t].map_tag)}));var s=t.byIds[r.parent_id];return s&&c["d"].mustLoadAsParent(s)&&(o=o.concat(e.tagsFor(s)),r=s),r.map_tag?o.push(r.map_tag):r.ancestors&&r.ancestors.slice().reverse().some((function(e){var a;return!!(null===(a=t.byIds[e])||void 0===a?void 0:a.map_tag)&&(o.push(t.byIds[e].map_tag),!0)})),n["route/getFiltered"].forEach((function(t){t.map_tag&&t.area_id===i.id&&o.push(t.map_tag)})),o},tagsFor:function(t,e,a){return function(t){var n=[];return e.getFiltered(t.id).forEach((function(t){t.map_tag&&n.push(t.map_tag)})),t.images&&t.images.forEach((function(t){var e,r;(null===(r=null===(e=a.image)||void 0===e?void 0:e.byIds[t])||void 0===r?void 0:r.map_tag)&&n.push(a.image.byIds[t].map_tag)})),n}}}};e["default"]=f},"31ee":function(t,e,a){"use strict";a.r(e);var n=a("b005"),r=!0,i={namespaced:r,state:{component:null,params:null},mutations:{open:function(t,e){t.component=e.component,t.params=e.params},close:function(t){t.component=null,t.params=null}},actions:{open:function(t,e){var a=t.commit;n["a"].setLeft(!1),n["a"].setRight(!0),a("open",e)},authorizeAndOpen:function(t,e){var a=t.dispatch,n=e.form,r=e.item;a("auth/authorize",r,{root:!0}).then((function(){a("open",n)}),(function(){}))},onlyAdminOpen:function(t,e){var a=t.dispatch;a("auth/authorizeOnlyAdmin",null,{root:!0}).then((function(){a("open",e)}),(function(){}))},close:function(t){var e=t.commit;n["a"].setRight(!1),e("close"),n["a"].setLeft(!0)}}};e["default"]=i},"35c2":function(t,e,a){},3753:function(t,e,a){"use strict";a.r(e);a("7db0");var n=!0,r={namespaced:n,state:{queue:[]},getters:{get:function(t){return 0!==t.queue.length?t.queue[0]:null}},mutations:{push:function(t,e){var a=t.queue.find((function(t){return t.message===e.message}));a||t.queue.push(e)},pop:function(t){t.queue.shift()}},actions:{show:function(t,e){var a=t.commit;a("push",{message:e,status:"show"})},error:function(t,e){var a=t.commit;a("push",{message:e,status:"error"})},success:function(t,e){var a=t.commit;a("push",{message:e,status:"success"})},warning:function(t,e){var a=t.commit;a("push",{message:e,status:"warning"})},throwError:function(t,e){var a=t.commit,n={status:"error",message:""};switch(e.code){case 400:n.message="Failed login attempt.";break;case 401:n.message="You have to have an active account<br>and be logged in to perform this action.";break;case 403:n.message="You don't have permissions to perform this action.";break;case 404:n.message="Requested resource wasn't found.";break;case 500:n.message="Internal server error! Will look into it :).";break;case 409:n.message="Seems this email is already taken.";break;case 422:n.message="Please verify your email before using the application.";break;default:n.message=e.message||"Well this is awkward :/"}a("push",n)}}};e["default"]=r},"37a5":function(t,e,a){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";document.title="ClimbLine - "+(t||"community maintained climbers guide")}a.d(e,"a",(function(){return n}))},"3a62":function(t,e,a){},"3f9b":function(t,e,a){var n={"./activity.ts":"970d","./adoption.ts":"7965","./area.ts":"31ac","./auth.ts":"cdd0","./form.ts":"31ee","./image.ts":"63f5","./index.ts":"f33f","./infoDialog.ts":"9c17","./pitch.ts":"151c","./route.ts":"158d","./snackbar.ts":"3753","./trail.ts":"7b93","./user.ts":"9dba"};function r(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=i,t.exports=r,r.id="3f9b"},"4b95":function(t,e,a){"use strict";a("5038")},5026:function(t,e,a){},5033:function(t,e,a){"use strict";a("d3b7"),a("96cf");var n=a("1da1"),r=a("3835"),i=a("d4ec"),o=a("bee2"),s=a("e11e"),c=a("0613"),u=a("842b"),l=a("17b6"),d=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"registerImageWatch",value:function(){var t=this;this._unWatchStore=c["a"].watch((function(t,e){return e["image/get"]}),(function(e,a){e&&e.id!==(null===a||void 0===a?void 0:a.id)&&t.open(e)}),{immediate:!0})}},{key:"getBoundsDepricated",value:function(t){var e=Object(r["a"])(t,2),a=e[0],n=e[1];return new s["LatLngBounds"](new s["LatLng"](0,0),new s["LatLng"](n/10,a/10))}},{key:"getBounds",value:function(t){var e=Object(r["a"])(t,2),a=e[0],n=e[1];return new s["LatLngBounds"](new s["LatLng"](-a,n),new s["LatLng"](a,-n))}},{key:"getMaxBounds",value:function(t){return t.pad(.3)}},{key:"open",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.boundary?this.getBounds(e.boundary):this.getBoundsDepricated(e.size),this._map.setMaxBounds(this.getMaxBounds(a)),this._map.fitBounds(a),this._imageOverlayThumbnail&&this._map.removeLayer(this._imageOverlayThumbnail),this._imageOverlay&&this._map.removeLayer(this._imageOverlay),t.t0=s["imageOverlay"],t.next=8,this.getImage(e.id,"thumbnail");case 8:return t.t1=t.sent,t.t2=a,this._imageOverlayThumbnail=(0,t.t0)(t.t1,t.t2),this._map.addLayer(this._imageOverlayThumbnail),t.t3=s["imageOverlay"],t.next=15,this.getImage(e.id);case 15:t.t4=t.sent,t.t5=a,t.t6={zIndex:2},this._imageOverlay=(0,t.t3)(t.t4,t.t5,t.t6),this._map.addLayer(this._imageOverlay);case 20:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getImage",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:null,n="image/"+e,a&&(n+="/"+a),a=null!==a&&void 0!==a?a:"full",t.next=6,this.fetchImage(a+"-"+e,n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"fetchImage",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"jpeg",t.next=3,this.loadImageFromCache(e,n);case 3:if(t.t0=t.sent,t.t0){t.next=8;break}return t.next=7,this.getAndCacheImage(e,a);case 7:t.t0=t.sent;case 8:if(r=t.t0,!r){t.next=11;break}return t.abrupt("return",r);case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"loadImageFromCache",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["b"].readFile({path:e,directory:l["a"].Cache});case 3:return n=t.sent,t.abrupt("return","data:image/"+a+";base64,"+n.data);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getAndCacheImage",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getBase64Image(a);case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return",null);case 5:return l["b"].writeFile({path:e,data:n,directory:l["a"].Cache}),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getBase64Image",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["a"].get(e,{responseType:"blob"});case 3:return a=t.sent,t.next=6,this.convertToBase64(a.data);case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"convertToBase64",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var n=new FileReader;n.onerror=a,n.onload=function(){t(n.result)},n.readAsDataURL(e)})));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"map",set:function(t){this._map=t,this._map?this.registerImageWatch():this._unWatchStore&&this._unWatchStore()}}]),t}(),m=new d;e["a"]=m},5038:function(t,e,a){},"572f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.state?a("v-snackbar",{staticStyle:{"z-index":"3000"},attrs:{color:t.state.status,timeout:t.timeout,bottom:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"d-flex flex-row justify-space-between"},[a("div",{domProps:{innerHTML:t._s(t.state.message)}}),a("v-btn",{attrs:{icon:"",text:""},on:{click:function(e){t.show=!1}}},[a("v-icon",[t._v("close")])],1)],1)]):t._e()},r=[],i=a("2b0e"),o=i["a"].extend({data:function(){return{show:!1}},computed:{state:function(){return this.$store.getters["snackbar/get"]},timeout:function(){return 1e3+50*this.state.message.length}},watch:{state:function(t){var e=this;null!==t&&i["a"].nextTick((function(){e.show=!0}))},show:function(t){!1===t&&this.$store.commit("snackbar/pop")}}}),s=o,c=a("2877"),u=a("6544"),l=a.n(u),d=a("8336"),m=a("132d"),f=a("2db4"),p=Object(c["a"])(s,n,r,!1,null,null,null);e["a"]=p.exports;l()(p,{VBtn:d["a"],VIcon:m["a"],VSnackbar:f["a"]})},"5d57":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return i}));a("4de4"),a("7db0"),a("caad"),a("d81d"),a("2532");var n,r,i,o=a("0613");(function(t){t[t["Country"]=0]="Country",t[t["Area"]=1]="Area",t[t["Mountain"]=3]="Mountain",t[t["MountainSide"]=4]="MountainSide",t[t["ClimbingSite"]=5]="ClimbingSite",t[t["Crag"]=6]="Crag",t[t["Sector"]=7]="Sector"})(n||(n={})),function(t){t["Area"]="area",t["Route"]="route",t["Trail"]="trail",t["Pitch"]="pitch"}(r||(r={})),function(t){t[t["Multipitch"]=0]="Multipitch",t[t["Singlepitch"]=1]="Singlepitch",t[t["Waterfall"]=2]="Waterfall",t[t["Boulder"]=3]="Boulder"}(i||(i={})),e["d"]={orientation:{items:[{labelShort:"N",label:"North",value:0},{labelShort:"NE",label:"North-East",value:45},{labelShort:"E",label:"East",value:90},{labelShort:"SE",label:"South-East",value:135},{labelShort:"S",label:"South",value:180},{labelShort:"SW",label:"South-West",value:225},{labelShort:"W",label:"West",value:270},{labelShort:"NW",label:"North-West",value:315}],getLabel:function(t){var e=this.items.find((function(e){var a=e.value-22.5,n=e.value+22.5;return a<t&&t<n}));return e?e.label:"Not set"}},area:[{databaseId:n.Country,value:"Country",description:"A country is a political state, nation, or controlled territory. ( Wiki :) )",orientation:!1,mapTag:!0,imageTag:!1,image:!1,trail:!1,currentLocationTag:!1,routes:!1,parenting:[n.Area,n.ClimbingSite,n.Crag,n.Mountain,n.MountainSide],directions:!1,loadParent:!1},{databaseId:n.Area,value:"Area",description:"A larger territory that has multiple Climbing sites / Mountains / Crags / smaller Areas, such as the Dolomites in Italy.",orientation:!1,mapTag:!0,imageTag:!1,trail:!1,image:!1,currentLocationTag:!1,parenting:[n.Area,n.ClimbingSite,n.Crag,n.Mountain,n.MountainSide],directions:!1,loadParent:!1},{databaseId:n.Mountain,value:"Mountain",description:"A mountain is a large landform that rises above the surrounding land in a limited area, usually in the form of a peak. (Wiki :) )",orientation:!1,mapTag:!0,imageTag:!1,trail:!0,image:!0,routes:!1,currentLocationTag:!1,parenting:[n.Crag,n.MountainSide],directions:!0,loadParent:!1},{databaseId:n.MountainSide,value:"Mountain side",description:"Single side of a mountain.",orientation:!0,mapTag:!0,imageTag:!1,image:!0,trail:!0,routes:!0,currentLocationTag:!1,parenting:[n.Crag,n.Sector],directions:!1,loadParent:!0},{databaseId:n.ClimbingSite,value:"Climbing site",description:"Has multiple Crags within 40min walking distance. Such as Paklenica in Croatia. ",orientation:!1,mapTag:!0,imageTag:!1,image:!0,trail:!0,routes:!1,currentLocationTag:!1,parenting:[n.Crag],directions:!0,loadParent:!0},{databaseId:n.Crag,value:"Crag",description:"Has multiple Sectors and/or multiple climbing routes, all within 15min walking distance",orientation:!0,mapTag:!0,imageTag:!0,image:!0,trail:!0,routes:!0,currentLocationTag:!0,parenting:[n.Sector],directions:!0,loadParent:!0},{databaseId:n.Sector,value:"Sector",description:"Has multiple routes, all within 5min walking distance",orientation:!0,mapTag:!0,imageTag:!0,image:!0,trail:!0,routes:!0,currentLocationTag:!0,parenting:[],directions:!1,loadParent:!0}],route:[{databaseId:i.Multipitch,value:"Multipitch",description:"Route that has multiple pitches, usually longer then 40m.",orientation:!0,mapTag:!0,imageTag:!1,currentLocationTag:!0,pitches:!0,directions:!0,maxLength:2e3},{databaseId:i.Singlepitch,value:"Singlepitch",description:"Short climbing route doesn't have pitches, usually shorter then 40m.",orientation:!0,mapTag:!1,imageTag:!0,currentLocationTag:!1,pitches:!1,directions:!1,maxLength:60},{databaseId:i.Waterfall,value:"Waterfall",description:"Ice climbing, can be single pitch or have multiple pitches.",orientation:!0,mapTag:!0,imageTag:!0,currentLocationTag:!0,pitches:!0,directions:!1,maxLength:1e3},{databaseId:i.Boulder,value:"Boulder",description:"No pitches here, just a big stone.",orientation:!0,mapTag:!1,imageTag:!0,currentLocationTag:!1,pitches:!1,directions:!1,maxLength:20}],hasOrientation:function(t,e){var a=this.find(t,e);return a.orientation},canGetDirections:function(t,e){var a=this.find(t,e.type_id);return null!==e.map_tag&&a.directions},getChildTypes:function(t){var e=this;if(!t)return[this.shapeTypeForSelect(this.area.find((function(t){return t.databaseId===n.Country})))];var a=this.area.find((function(e){return e.databaseId===t.type_id}));return this.area.filter((function(t){return null===a||void 0===a?void 0:a.parenting.includes(t.databaseId)})).map((function(t){return e.shapeTypeForSelect(t)}))},mustLoadAsParent:function(t){var e=this.find(r.Area,t.type_id);return e.loadParent},getTypeName:function(t,e){var a=this.find(t,e);return a?a.value:""},getMaxLength:function(t){var e=this.find(r.Route,t);return e&&e.maxLength},getRouteTypes:function(){var t=this;return this.route.map((function(e){return t.shapeTypeForSelect(e)}))},canTag:function(t,e){var a=this.find(t,e);return o["a"].getters.imageOpen?a.imageTag:a.mapTag},canTagCurrentLocation:function(t,e){var a=this.find(t,e);return!o["a"].getters.imageOpen&&a.currentLocationTag},hasTrails:function(t,e){var a=this.find(t,e);return t===r.Area&&!o["a"].getters.imageOpen&&a.trail},hasImages:function(t,e){var a=this.find(t,e);return t===r.Route||a.image},canAddImage:function(t,e){var a=this.find(t,e);return t===r.Area&&a.image},hasRoutes:function(t,e){return t===r.Area},canAddRoute:function(t,e){var a=this.find(t,e);return t===r.Area&&a.routes},hasAreas:function(t,e){var a,n=this.find(t,e.type_id),i=t===r.Area&&n.parenting;return"routes"in e&&(i=i&&0===(null===(a=e.routes)||void 0===a?void 0:a.length)),i},hasPitches:function(t,e){var a=this.find(t,e);return t===r.Route&&a.pitches},find:function(t,e){return this[t].find((function(t){return t.databaseId===e}))},shapeTypeForSelect:function(t){return{value:null===t||void 0===t?void 0:t.databaseId,text:null===t||void 0===t?void 0:t.value}}}},"5f68":function(t,e,a){"use strict";function n(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" heigth="24" viewBox="0 0 24 24">'+t+"</svg>"}function r(t){return"data:image/svg+xml;base64,"+btoa(n(t))}a.d(e,"a",(function(){return r}))},"63f5":function(t,e,a){"use strict";a.r(e);a("c740"),a("4160"),a("a434"),a("a9e3"),a("8ba4"),a("d3b7"),a("159b");var n=a("5530"),r=a("2b0e"),i=a("842b"),o=a("70c7"),s=!0,c={namespaced:s,state:{byIds:{},allIds:[],loading:!1},mutations:Object(n["a"])({},o["a"],{storeImageTag:function(t,e){var a=Object(n["a"])({},t.byIds[e.image_id]),i=a.tags.findIndex((function(t){return t.id===e.id}));-1!==i&&a.tags.splice(i,1),a.tags.push(e),r["a"].set(t.byIds,e.image_id,a)},removeImageTag:function(t,e){var a=e.imageId,i=e.tag,o=Object(n["a"])({},t.byIds[a]),s=o.tags.findIndex((function(t){return t.id===i.id}));-1!==s&&o.tags.splice(s,1),r["a"].set(t.byIds,a,o)}}),actions:{normalizeData:function(t,e){var a=t.commit;e.tags&&e.tags.forEach((function(t){a(t.tagged_type+"/add",t.tagged,{root:!0}),delete t.tagged})),e.routes&&e.routes.forEach((function(t){a("route/add",t,{root:!0})})),delete e.routes,a("add",e)},fetch:function(t,e){var a,n=t.state,r=t.commit,o=t.dispatch,s=null===(a=n.byIds[e])||void 0===a?void 0:a.fullyLoaded;if(s&&Number.isInteger(s)){var c=Date.now()-s;if(c<6e4)return}s||(o("snackbar/show","Loading image...",{root:!0}),r("loading",!0)),i["a"].get("image/"+e+"/tags").then((function(t){var e=t.data;e.fullyLoaded=Date.now(),o("normalizeData",e),n.loading&&o("snackbar/success","Done!",{root:!0}),r("loading",!1)})).catch((function(){r("loading",!1)}))},fetchAll:function(t){var e=t.commit,a=t.dispatch;e("loading",!0),a("snackbar/show","Loading images!",{root:!0}),i["a"].get("admin/getImages").then((function(t){var n=t.data;n.forEach((function(t){e("add",t)})),a("snackbar/success","Done!",{root:!0})})).finally((function(){e("loading",!1)}))}},getters:{get:function(t,e,a){var n;return(null===(n=a.url)||void 0===n?void 0:n.params.imageId)&&t.byIds[a.url.params.imageId]},find:function(t){return function(e){return t.byIds[e]}},tags:function(t,e){return e.get&&e.get.tags||[]},notReviewed:function(t){var e=[];return t.allIds.forEach((function(a){var n=t.byIds[a];n.reviewer_id||e.push(n)})),e}}};e["default"]=c},"69bd":function(t,e,a){"use strict";a("5026")},"69c5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.canTag?a("div",{staticStyle:{display:"inline"}},[t.edit?a("v-btn",{class:{"menu-button":t.showText},attrs:{text:"",icon:!t.showText,title:"Edit "+t.addingTypeText,block:t.showText},on:{click:function(e){return t.editTag(e)}}},[a("v-icon",[t._v("edit_location")]),t.showText?a("div",[t._v("Edit "+t._s(t.type)+" "+t._s(t.addingTypeText))]):t._e()],1):a("v-btn",{class:{"menu-button":t.showText},attrs:{text:"",icon:!t.showText,title:"Add "+t.addingTypeText,block:t.showText},on:{click:function(e){return t.createTag(e)}}},[a("v-icon",[t._v("add_location")]),t.showText?a("div",[t._v("Add "+t._s(t.type)+" "+t._s(t.addingTypeText))]):t._e()],1)],1):t._e()},r=[],i=(a("d3b7"),a("2b0e")),o=a("b005"),s=a("5d57"),c=i["a"].extend({props:{type:String,item:Object,showText:Boolean,stop:{type:Boolean,default:!0}},computed:{canTag:function(){return!this.$store.state.drawing},edit:function(){return this.$store.getters.hasTag(this.type+this.item.id)},addingTypeText:function(){return s["b"].Area===this.type||s["b"].Route===this.type&&!this.$store.getters.imageOpen?"location":"topo"}},methods:{createTag:function(t){var e=this;this.stop&&t.stopPropagation(),this.closeDrawerIfMobile(),a.e("drawing.service").then(a.bind(null,"cb8b")).then((function(t){t.default.createTag(e.type,e.item)}))},editTag:function(t){var e=this;this.stop&&t.stopPropagation(),this.closeDrawerIfMobile(),a.e("drawing.service").then(a.bind(null,"cb8b")).then((function(t){t.default.editTag(e.type,e.item)}))},closeDrawerIfMobile:function(){this.$vuetify.breakpoint.xs&&o["a"].setLeft(!1)}}}),u=c,l=a("2877"),d=a("6544"),m=a.n(d),f=a("8336"),p=a("132d"),h=Object(l["a"])(u,n,r,!1,null,null,null);e["a"]=h.exports;m()(h,{VBtn:f["a"],VIcon:p["a"]})},"70c7":function(t,e,a){"use strict";a("c740"),a("caad"),a("a434"),a("2532");var n=a("5530"),r=a("2b0e");e["a"]={loading:function(t,e){t.loading=e},add:function(t,e){var a=e;t.allIds.includes(e.id)?a=Object(n["a"])({},t.byIds[e.id],{},e):t.allIds.push(e.id),r["a"].set(t.byIds,a.id,a)},remove:function(t,e){var a=t.allIds.findIndex((function(t){return t===e.id}));-1!==a&&(r["a"].delete(t.byIds,e.id),t.allIds.splice(a,1))},storeMapTag:function(t,e){var a=Object(n["a"])({},t.byIds[e.tagged_id]);a.map_tag=e,t.byIds[e.tagged_id]=a},removeMapTag:function(t,e){var a=Object(n["a"])({},t.byIds[e]);a.map_tag=null,t.byIds[e]=a}}},7965:function(t,e,a){"use strict";a.r(e);a("d81d"),a("ac1f"),a("1276");var n=a("5530"),r=a("842b"),i=!0,o={namespaced:i,state:{type:"",item:null},mutations:{set:function(t,e){var a=e.type,n=e.item;t.type=a,t.item=n},remove:function(t){t.type="",t.item=null}},actions:{setChild:function(t,e){var a=t.commit,n=t.dispatch;n("auth/authorizeOnlyAdmin",null,{root:!0}).then((function(){a("set",e),n("snackbar/show","Moving "+e.type+" ... now go to the area you want to move it to",{root:!0})})).catch((function(){}))},setParent:function(t,e){var a=t.state,i=t.commit,o=t.dispatch;a.item&&r["a"].put(a.type+"/"+a.item.id+"/move",{id:e}).then((function(t){var r=t.data,s=r+"",c=s.split(".").map((function(t){return parseInt(t)}));"route"===a.type?a.item&&i("route/add",Object(n["a"])({},a.item,{ancestors:c,path:s}),{root:!0}):(a.item&&i("area/removeArea",{parentId:a.item.parent_id,areaId:a.item.id},{root:!0}),a.item&&i("area/appendArea",{parentId:e,areaId:a.item.id},{root:!0}),a.item&&i("area/add",Object(n["a"])({},a.item,{path:s,ancestors:c}),{root:!0})),i("remove"),o("snackbar/success","Item was moved to the new area",{root:!0})}))}}};e["default"]=o},"7b93":function(t,e,a){"use strict";a.r(e);var n=a("5530"),r=a("70c7"),i=!0,o={namespaced:i,state:{byIds:{},allIds:[]},mutations:Object(n["a"])({},r["a"]),actions:{normalizeData:function(t,e){var a=t.commit;a("add",e)}},getters:{find:function(t){return function(e){return t.byIds[e]}}}};e["default"]=o},"842b":function(t,e,a){"use strict";a("caad"),a("d3b7"),a("ac1f"),a("2532"),a("1276");var n=a("1547"),r=a("bc3a"),i=a.n(r),o=a("0613"),s=a("afbc"),c=n["a"].isNativePlatform()?"https://climbline.net/api/":"/api/",u=i.a.create({baseURL:c});u.interceptors.request.use((function(t){var e,a,n,r,i=o["a"].state.auth&&o["a"].state.auth.token,s=!(null===(e=t.url)||void 0===e?void 0:e.includes("http"))||(null===(a=t.url)||void 0===a?void 0:a.includes("http"))&&((null===(n=t.url)||void 0===n?void 0:n.includes("climbline"))||(null===(r=t.url)||void 0===r?void 0:r.includes("localhost")));return i&&s&&(t.headers.Authorization="Bearer "+i),t})),u.interceptors.response.use((function(t){var e=t.headers.authorization;if(e){var a=e.split(" ")[1];o["a"].dispatch("auth/login",a)}return t}),(function(t){return o["a"].state.online?(t.response&&(o["a"].dispatch("snackbar/throwError",{code:t.response.status,message:t.response.data}),404===t.response.status&&s["a"].push("/")),Promise.reject(t)):("get"===t.config.method?o["a"].dispatch("snackbar/error","Resource unavailable, working offline."):o["a"].dispatch("snackbar/show","No internet connection, changes not stored."),Promise.resolve(!0))})),e["a"]=u},"8fad":function(t,e,a){"use strict";a("0994")},"91d9":function(t,e,a){},"970d":function(t,e,a){"use strict";a.r(e);a("4160"),a("d3b7"),a("159b");var n=a("5530"),r=a("842b"),i=a("2b0e"),o=a("70c7"),s=a("07a8"),c="admin/",u=!0,l={namespaced:u,state:{byIds:{},allIds:[],loading:!1},mutations:Object(n["a"])({},o["a"],{resolveActivity:function(t,e){var a=Object(n["a"])({},t.byIds[e],{status:!0});i["a"].set(t.byIds,e,a)}}),actions:{normalizeData:function(t,e){var a=t.commit;a("add",Object(s["a"])(e,["subject","causer"])),a("add",e),e.causer&&a("user/add",e.causer,{root:!0})},fetchNotApproved:function(t){var e=t.commit,a=t.dispatch;e("loading",!0),a("snackbar/show","Loading activities!",{root:!0}),r["a"].get(c+"getNotApprovedActivities").then((function(t){var e=t.data;e.forEach((function(t){a("normalizeData",t)})),a("snackbar/success","Done!",{root:!0})})).finally((function(){e("loading",!1)}))},approveActivity:function(t,e){var a=t.commit,n=t.dispatch;n("snackbar/show","Approving activity ...",{root:!0}),r["a"].get(c+"approveActivity/"+e).then((function(){a("resolveActivity",e),n("snackbar/success","Activity approved",{root:!0})})).finally((function(){a("loading",!1)}))},revertActivity:function(t,e){var a=t.commit,n=t.dispatch;n("snackbar/show","Reverting activity ...",{root:!0}),r["a"].get(c+"revertActivity/"+e).then((function(){a("resolveActivity",e),n("snackbar/success","Activity reverted",{root:!0})})).finally((function(){a("loading",!1)}))}},getters:{find:function(t){return function(e){return t.byIds[e]}},notApproved:function(t){var e=[];return t.allIds.forEach((function(a){null===t.byIds[a].status&&e.push(t.byIds[a])})),e}}};e["default"]=l},"9c17":function(t,e,a){"use strict";a.r(e);a("a4d3"),a("e01a");var n=!0,r={namespaced:n,state:{title:"",description:"",show:!1},mutations:{show:function(t,e){var a=e.title,n=e.description;t.title=a,t.description=n,t.show=!0},close:function(t){t.title="",t.description="",t.show=!1}}};e["default"]=r},"9da2":function(t,e,a){"use strict";a("91d9")},"9dba":function(t,e,a){"use strict";a.r(e);a("4160"),a("d3b7"),a("159b");var n=a("5530"),r=a("842b"),i=a("70c7"),o=!0,s={namespaced:o,state:{byIds:{},allIds:[],loading:!1},mutations:Object(n["a"])({},i["a"]),actions:{normalizeData:function(t,e){var a=t.commit;a("add",e)},fetchAll:function(t){var e=t.commit,a=t.dispatch;e("loading",!0),a("snackbar/show","Loading users!",{root:!0}),r["a"].get("admin/user").then((function(t){var n=t.data;n.forEach((function(t){e("add",t)})),a("snackbar/success","Done!",{root:!0})})).finally((function(){e("loading",!1)}))}},getters:{find:function(t){return function(e){return t.byIds[e]}}}};e["default"]=s},a005:function(t,e,a){"use strict";a.d(e,"b",(function(){return u}));a("7db0"),a("b0c0");var n=a("e11e"),r=a("5f68"),i="#3490dc";function o(t){return'<circle cx="12" cy="12" r="6" fill="'+t+'"/>'}function s(t){return'<path d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="3.2" fill="'+t+'"/><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" fill="'+t+'"/>'}function c(t,e){t.setIcon(new n["Icon"]({iconUrl:Object(r["a"])(e),iconSize:[18,18],iconAnchor:[9,9]}))}var u=["#01579B","#43A047","#43A047","#43A047","#43A047","#43A047","#43A047","#43A047","#388E3C","#388E3C","#388E3C","#388E3C","#388E3C","#388E3C","#388E3C","#388E3C","#388E3C","#388E3C","#388E3C","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#1B5E20","#FB8C00","#FB8C00","#FB8C00","#FB8C00","#F57C00","#F57C00","#F57C00","#F57C00","#EF6C00","#EF6C00","#EF6C00","#EF6C00","#E53935","#E53935","#E53935","#E53935","#D32F2F","#D32F2F","#D32F2F","#D32F2F","#C62828","#C62828","#C62828","#C62828","#8E24AA","#8E24AA","#8E24AA","#8E24AA","#7B1FA2","#7B1FA2","#7B1FA2","#7B1FA2","#6A1B9A","#6A1B9A","#6A1B9A","#6A1B9A","#4A148C","#4A148C","#4A148C","#4A148C","#4A148C","#4A148C"],l={style:function(t,e,a,r){var i='<div class="climb-area">'+a.name+"</div>";r=r||200*-(a.path?a.path.length:0),t.setZIndexOffset(r),t.setIcon(new n["DivIcon"]({className:e,html:i}))},default:function(t){this.style(t.layer,"climb-area-none",t.item)},highlight:function(t){this.style(t.layer,"climb-area-highlight",t.item,1e3)},selected:function(t){this.style(t.layer,"climb-area-selected",t.item)}},d={default:function(t){c(t.layer,o("black"))},highlight:function(t){c(t.layer,o(i))},selected:function(t){c(t.layer,o("orangered"))}},m={default:function(t){var e=t.item.grades.find((function(t){return 10===t[0]}));t.layer.setStyle({color:u[e?e[1]:0],weight:3})},highlight:function(t){t.layer.setStyle({color:i,weight:5})},selected:function(t){t.layer.setStyle({color:"yellow",weight:5}),t.layer.bringToFront()}},f={default:function(t){c(t.layer,s("black"))},highlight:function(t){c(t.layer,s(i))},selected:function(t){c(t.layer,s("orangered"))}},p={default:function(t){var e=t.item.grades.find((function(t){return 10===t[0]}));t.layer.setStyle({color:u[e?e[1]:0],weight:3})},highlight:function(t){t.layer.setStyle({color:i,weight:5})},selected:function(t){t.layer.setStyle({color:"yellow",weight:5}),t.layer.bringToFront()}},h={dashArray:"10 5",default:function(t){t.layer.setStyle({color:"green",dashArray:this.dashArray})},highlight:function(t){t.layer.setStyle({color:i,dashArray:this.dashArray})},selected:function(t){t.layer.setStyle({color:"orangered",dashArray:this.dashArray})}},g={default:function(t){c(t,o("#4285F4"))}},v={map:{area:l,trail:h,pitch:null,route:d,image:f},image:{area:l,trail:h,pitch:p,route:m,image:f},currentLocation:g};e["a"]=v},a96b:function(t,e,a){"use strict";a("4de4"),a("4160"),a("caad"),a("fb6a"),a("159b");var n=a("d4ec"),r=a("bee2"),i=function(){function t(){Object(n["a"])(this,t),this.types=[{id:0,type:"combined",name:"Combined climbing",charts:["fr_combined","uiaa"],primary:!1,multipitchOnly:!0},{id:1,type:"mix",name:"Mix climbing",charts:["mix"],primary:!1,multipitchOnly:!1},{id:2,type:"alpine",name:"Alpine climbing",charts:["alpine"],primary:!1,multipitchOnly:!1},{id:3,type:"tehnical",name:"Tehnical climbing",charts:["tehnical"],primary:!1,multipitchOnly:!1},{id:4,type:"required",name:"Required grade",charts:["fr","uiaa","ydr"],primary:!1,multipitchOnly:!1},{id:5,type:"ice",name:"Ice climbing",charts:["ice"],primary:!1,multipitchOnly:!1},{id:6,type:"incline",name:"Incline",charts:["incline"],primary:!1,multipitchOnly:!1},{id:7,type:"avg_incline",name:"Average incline",charts:["incline"],primary:!1,multipitchOnly:!0},{id:8,type:"rng_from_incline",name:"Minimum incline",charts:["incline"],primary:!1,multipitchOnly:!1},{id:9,type:"rng_to_incline",name:"Maximum incline",charts:["incline"],primary:!1,multipitchOnly:!1},{id:10,type:"max",name:"Free climbing grade",charts:["fr","uiaa","ydr"],primary:!0,multipitchOnly:!1},{id:11,type:"avg",name:" Average route grade",charts:["fr","uiaa","ydr"],primary:!0,multipitchOnly:!0}],this.charts={fr:["-","1","1","1","2","2","3","3","4a","4a/a+","4a+","4a+/b","4b","4b/b+","4b+","4b+/c","4c","4c/c+","4c+","4c+/5a","5a","5a/a+","5a+","5a+/b","5b","5b/b+","5b+","5b+/c","5c","5c/c+","5c+","5c+/6a","6a","6a/a+","6a+","6a+/b","6b","6b/b+","6b+","6b+/c","6c","6c/c+","6c+","6c+/7a","7a","7a/a+","7a+","7a+/b","7b","7b/b+","7b+","7b+/c","7c","7c/c+","7c+","7c+/8a","8a","8a/a+","8a+","8a+/b","8b","8b/b+","8b+","8b+/c","8c","8c/c+","8c+","8c+/9a","9a","9a/a+","9a+","9a+/b","9b"],uiaa:["-","I","I-II","II","II-III","III","III-IV","IV-","IV","IV+","IV+","IV-V","IV-V","V-","V-","V","V","V","V+","V+","V+","V-VI","VI-","VI-","VI-","VI","VI","VI","VI","VI+","VI+","VI+","VI-VII","VII-","VII-","VII-","VII","VII","VII+","VII+","VII-VIII","VIII-","VIII-","VIII","VIII","VIII","VIII+","VIII+","VIII-IX","IX-","IX-","IX--IX","IX","IX","IX+","IX+","IX-X","X-","X-","X--X","X","X","X-X+","X+","X-XI","XI-","XI--XI","XI","XI-XI+","XI+","XI+","XI-XII","XII-"],ydr:["-","5.1","5.1","5.2","5.3","5.3","5.4","5.4","5.5","5.5","5.6","5.6","5.6","5.6","5.6","5.7","5.7","5.7","5.7","5.8","5.8","5.8","5.8","5.9","5.9","5.9","5.10a","5.10a","5.10a","5.10a","5.10b","5.10b","5.10b","5.10b","5.10c","5.10c","5.10d","5.10d","5.11a","5.11a","5.11b","5.11c","5.11c","5.11d","5.11d","5.12a","5.12a","5.12b","5.12b","5.12c","5.12c","5.12d","5.12d","5.13a","5.13a","5.13b","5.13b","5.13c","5.13c","5.13d","5.13d","5.14a","5.14a","5.14b","5.14b","5.14c","5.14c","5.14d","5.14d","5.15a","5.15a","5.15b","5.15b"],tehnical:["-","A0","A1","A2","A3","A4","A5"],incline:["-","10","15","20","25","30","35","40","45","50","55","60","65","70","75","80","85","90"],ice:["-","WI1","WI2","WI3","WI3+","WI4-","WI4","WI4+","WI5-","WI5","WI5+","WI6-","WI6","WI6+","WI7-","WI7","WI7+","WI8-","WI8","WI8+"],alpine:["-","AI1","AI2","AI3","AI3+","AI4-","AI4","AI4+","AI5-","AI5","AI5+","AI6-","AI6","AI6+","AI7-","AI7","AI7+","AI8-","AI8","AI8+"],mix:["-","M1","M2","M3","M4","M5-","M5","M5+","M6-","M6","M6+","M7-","M7","M7+","M8-","M8","M8+","M9-","M9","M9+","M10-","M10","M10+","M11-","M11","M11+","M12-","M12","M12+","M13-","M13","M13+"],fr_combined:["-","F-","F-","F","F+","PD-","PD","PD+","AD-","AD","AD+","D-","D","D+","TD-","TD","TD+","ED-","ED","ED+","ABO-","ABO","ABO+"]}}return Object(r["a"])(t,[{key:"getGradeValue",value:function(t,e){return this.charts[this.types[t].charts[0]][e]}},{key:"getGradesFor",value:function(t){if(t=t||0,1===t){var e=[0,7,11];return this.types.filter((function(t){return!e.includes(t.id)}))}return this.types}},{key:"getGradesForSliders",value:function(t,e){var a=this,n={};return this.types.forEach((function(r){!t&&r.multipitchOnly||r.primary===e&&(n[r.id]={},n[r.id].grade=r,n[r.id].maxGrades=a.charts[r.charts[0]].length-1,n[r.id].tickLabels=a.charts[r.charts[0]])})),n}},{key:"forge",value:function(t){t=t||[];var e={},a="";return t.forEach((function(t){e[t[0]]=t[1]})),a=0 in e?this.getGradeValue(0,e[0])+" ":"",a+=1 in e?this.getGradeValue(1,e[1]):"",""!==a&&" "!==a.slice(-1)&&10 in e&&(a+=","),a+=10 in e?this.getGradeValue(10,e[10]):"",3 in e&&4 in e?a+="("+this.getGradeValue(4,e[4])+", "+this.getGradeValue(3,e[3])+")":3 in e?a+="("+this.getGradeValue(3,e[3])+")":4 in e&&(a+="("+this.getGradeValue(4,e[4])+")"),a+=11 in e?"/"+this.getGradeValue(11,e[11]):"",a+=5 in e?","+this.getGradeValue(5,e[5]):"",a+=2 in e?","+this.getGradeValue(2,e[2]):"",a+=6 in e?","+this.getGradeValue(6,e[6])+"°":"",a+=7 in e?"/"+this.getGradeValue(7,e[7])+"°":"",8 in e&&9 in e&&(a+=","+this.getGradeValue(8,e[8])+"°-"+this.getGradeValue(9,e[9])+"°"),","===a[0]&&(a=a.slice(1)),"("===a[0]&&")"===a[a.length-1]&&(a=a.slice(1,a.length-1)),a}}]),t}(),o=new i;e["a"]=o},afbc:function(t,e,a){"use strict";a.d(e,"b",(function(){return en}));a("d3b7");var n=a("5530"),r=a("2b0e"),i=a("8c4f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("nav-bar"),t.loadMain?a("v-main",{staticStyle:{padding:"0px"}},[a("drawing-actionbar"),a("router-view",{attrs:{name:"map"}})],1):t._e(),a("notification-snackbar")],1)},s=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.drawing?a("v-snackbar",{staticClass:"action-snackbar",attrs:{absolute:"",timeout:-1,top:""},model:{value:t.drawing,callback:function(e){t.drawing=e},expression:"drawing"}},[a("div",{staticClass:"d-flex flex-row justify-center"},[a("v-btn",{attrs:{text:""},on:{click:t.save}},[t._v(" Save ")]),a("v-btn",{attrs:{text:""},on:{click:t.discard}},[t._v(" Discard ")])],1)]):t._e()},u=[],l=a("2f62"),d={computed:Object(n["a"])({},Object(l["e"])(["drawing"])),methods:{save:function(){a.e("drawing.service").then(a.bind(null,"cb8b")).then((function(t){t.default.storeTag()}))},discard:function(){a.e("drawing.service").then(a.bind(null,"cb8b")).then((function(t){t.default.discardLayer()}))}}},m=d,f=(a("69bd"),a("2877")),p=a("6544"),h=a.n(p),g=a("8336"),v=a("2db4"),b=Object(f["a"])(m,c,u,!1,null,"3463f3fe",null),y=b.exports;h()(b,{VBtn:g["a"],VSnackbar:v["a"]});var I=a("572f"),_=a("0790"),w=(a("6cc5"),a("b005")),k=r["a"].extend({components:{DrawingActionbar:y,NavBar:_["a"],NotificationSnackbar:I["a"]},computed:{loadMain:function(){return window.innerWidth>500||!1===w["a"].state.left}}}),A=k,x=(a("2b56"),a("7496")),O=a("f6c4"),T=Object(f["a"])(A,o,s,!1,null,null,null),C=T.exports;h()(T,{VApp:x["a"],VMain:O["a"]});var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticStyle:{padding:"0px 0px 300px 0px"},attrs:{fluid:"",flat:""}},[a("v-layout",{attrs:{column:""}},[a("area-list",{attrs:{searchable:""}}),a("div",{staticClass:"d-flex pa-2"},[a("h3",{staticClass:"headline pa-2"},[t._v("Countries")]),a("v-spacer"),a("v-btn",{attrs:{title:"Add country",text:"",icon:"","aria-label":"Add country"},on:{click:function(e){return e.stopPropagation(),t.openOnlyAdminForm({component:"area-form",params:null})}}},[a("v-icon",[t._v("add")])],1)],1),a("area-list",{attrs:{areaIds:t.rootIds,showType:!1}})],1),0!==t.recentlyViewedIds.length?a("v-layout",{attrs:{column:""}},[a("div",{staticClass:"d-flex pa-2"},[a("h3",{staticClass:"headline pa-2"},[t._v("Recently viewed")])]),a("area-list",{attrs:{areaIds:t.recentlyViewedIds}})],1):t._e()],1)},j=[],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[t.searchable?a("v-text-field",{attrs:{label:"Search areas",loading:t.loading&&null!==t.areaQueryString},model:{value:t.areaQueryString,callback:function(e){t.areaQueryString=e},expression:"areaQueryString"}}):t._e(),t.wasFiltered?a("filtering-alert",{attrs:{type:"areas"}}):t._e(),a("table",{staticClass:"area-table"},[a("tbody",[t._l(t.limitedAreas,(function(e){return a("area-list-item",{key:e.id,attrs:{area:e,showType:t.showType}})})),a("tr",{directives:[{name:"intersect",rawName:"v-intersect",value:t.loadOnIntersect,expression:"loadOnIntersect"}]})],2)]),t.loading&&!t.searchable||t.searchable&&t.searching?a("details-loading"):t._e()],1)},E=[],S=(a("4160"),a("fb6a"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{class:{area_list_hover:t.highlight,list_border:!0},on:{mouseenter:function(e){return t.onMouseOver()},mouseleave:function(e){return t.onMouseOut()},click:function(e){return t.link()}}},[a("td",{staticStyle:{"max-width":"160px","min-width":"120px","padding-left":"15px"}},[a("v-list-item-subtitle",{staticClass:"area_type"},[t.showType?a("span",[t._v(t._s(t.typeName))]):t._e()]),a("v-list-item-title",[t._v(t._s(t.area.name))])],1),a("td",[a("v-icon",[t._v("timeline")]),t._v(t._s((100*t.area.tag_coverage).toFixed(2))+" % ")],1),a("td",[a("v-icon",[t._v("photo_library")]),t._v(t._s(t.area.image_count)+" ")],1)])}),M=[],$=a("5d57"),P=a("f41f"),F={props:{area:Object,showType:Boolean},computed:{key:function(){return this.type+this.area.id},highlight:function(){return P["a"].key===this.key},typeName:function(){return $["d"].getTypeName(this.type,this.area.type_id)},type:function(){return $["b"].Area}},methods:{link:function(){this.onMouseOut(),this.$router.push(en(this.type,this.area.id))},onMouseOver:function(){P["a"].key=this.key},onMouseOut:function(){P["a"].key=null}}},D=F,R=(a("8fad"),a("132d")),B=a("5d23"),z=Object(f["a"])(D,S,M,!1,null,null,null),N=z.exports;h()(z,{VIcon:R["a"],VListItemSubtitle:B["b"],VListItemTitle:B["c"]});var W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-alert",{attrs:{dense:"",border:"left",type:"warning"}},[t._v(" Some "+t._s(t.type)+" aren't displayed due to filters! "),a("route-filters-button",[t._v("Adjust filters")])],1)},G=[],X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{text:"",title:"Filters",icon:t.icon},on:{click:function(e){return e.stopPropagation(),t.openAuthorizedForm({form:{component:"route-filters-form"}})}}},[a("v-icon",[t._v("filter_list")]),t._v(" "),t._t("default")],2)},q=[],H={props:{icon:{type:Boolean,default:!1}},methods:Object(n["a"])({},Object(l["b"])({openAuthorizedForm:"form/authorizeAndOpen"}))},Q=H,U=Object(f["a"])(Q,X,q,!1,null,null,null),J=U.exports;h()(U,{VBtn:g["a"],VIcon:R["a"]});var Z={props:{type:{type:String,default:"items"}},components:{RouteFiltersButton:J}},Y=Z,K=a("0798"),tt=Object(f["a"])(Y,W,G,!1,null,null,null),et=tt.exports;h()(tt,{VAlert:K["a"]});var at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"justify-center":"",fluid:"","fill-height":""}},[a("v-progress-circular",{attrs:{size:50,indeterminate:""}})],1)},nt=[],rt=a("a523"),it=a("490a"),ot={},st=Object(f["a"])(ot,at,nt,!1,null,null,null),ct=st.exports;h()(st,{VContainer:rt["a"],VProgressCircular:it["a"]});var ut={cancelToken:null,props:{area:Object,areaIds:Array,showType:{type:Boolean,default:!0},searchable:{type:Boolean,default:!1}},components:{AreaListItem:N,FilteringAlert:et,DetailsLoading:ct},data:function(){return{areaQueryString:null,areaLimit:10}},computed:Object(n["a"])({wasFiltered:function(){var t=this.$store.state.route.filters;return this.area&&this.area.areas.length!==this.areas.length&&t&&(t.gradeTypes||t.gradeWeights||t.orientation&&0!==t.orientation.length||t.query||t.length)}},Object(l["e"])({loading:function(t){return t.area.loading},searching:function(t){return t.area.searching}}),{limitedAreas:function(){return this.areas.slice(0,this.areaLimit)},areas:function(){var t,e=this;if(this.areaIds){var a=[];return this.areaIds.forEach((function(t){var n=e.$store.state.area.byIds[t];n&&a.push(n)})),a}return this.$store.getters["area/getFiltered"](null===(t=this.area)||void 0===t?void 0:t.id,this.areaQueryString)}}),watch:{areaQueryString:function(t){t=""===t?null:t,t&&this.loadAreasOnce(t)},$route:function(){this.areaQueryString=null}},methods:{loadAreasOnce:function(t){var e=this;this.$options.cancelToken&&clearTimeout(this.$options.cancelToken),this.$options.cancelToken=setTimeout((function(){return e.$store.dispatch("area/fetchMany",t)}),500)},loadOnIntersect:function(){this.areaLimit+=10}}},lt=ut,dt=(a("14c2"),a("8654")),mt=a("269a"),ft=a.n(mt),pt=a("90a2"),ht=Object(f["a"])(lt,L,E,!1,null,null,null),gt=ht.exports;h()(ht,{VContainer:rt["a"],VTextField:dt["a"]}),ft()(ht,{Intersect:pt["a"]});var vt=a("37a5"),bt=(a("b64b"),a("0613"));function yt(t,e){for(var a={},n=0,r=Object.keys(t.params);n<r.length;n++){var i=r[n];e.params[i]&&e.params[i]===t.params[i]||(a[i]=t.params[i])}a.areaId&&bt["a"].dispatch("area/fetch",a.areaId),a.imageId&&bt["a"].dispatch("image/fetch",a.imageId),a.routeId&&bt["a"].dispatch("route/fetch",a.routeId)}var It={beforeRouteEnter:function(t,e,a){yt(t,e),a()},beforeRouteUpdate:function(t,e,a){yt(t,e),a()}},_t={mixins:[It],data:function(){return{areaQueryString:""}},computed:Object(n["a"])({},Object(l["e"])({rootIds:function(t){return t.area.rootIds},recentlyViewedIds:function(t){return t.area.recentlyViewedIds}})),created:function(){Object(vt["a"])(),this.$store.dispatch("area/fetchMany")},methods:Object(n["a"])({},Object(l["b"])({openOnlyAdminForm:"form/onlyAdminOpen"})),components:{AreaList:gt}},wt=_t,kt=a("a722"),At=a("2fa4"),xt=Object(f["a"])(wt,V,j,!1,null,null,null),Ot=xt.exports;h()(xt,{VBtn:g["a"],VContainer:rt["a"],VIcon:R["a"],VLayout:kt["a"],VSpacer:At["a"]});var Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("details-loading"):a("details-layout",{attrs:{item:t.area,type:t.type}},[a("template",{slot:"item-details"},[a("area-stats",{attrs:{item:t.area}}),a("v-divider"),a("v-expansion-panels",{attrs:{flat:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",{staticClass:"pa-0"},[a("v-card-subtitle",{staticClass:"pa-0"},[t._v("Statistics")])],1),a("v-expansion-panel-content",[t.area.orientations?a("orientations-chart",{attrs:{orientations:t.area.orientations}}):t._e(),t._l(t.area.grade_stats,(function(e,n){return a("statistics-chart",{key:n+t.area.id,attrs:{type:n,stats:e}})})),t.area.length_stats?a("length-chart",{key:"length"+t.area.id,attrs:{stats:t.area.length_stats}}):t._e(),a("moderator-list",{attrs:{moderators:t.moderators,area:t.area}})],2)],1)],1)],1)],2)},Ct=[],Vt=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticStyle:{padding:"0px 0px 300px 0px"},attrs:{fluid:"",flat:""}},[a("v-layout",{attrs:{column:""}},[a("v-layout",{staticClass:"pa-2 align-center"},[a("back-button"),a("v-layout",{staticClass:"pl-2",attrs:{column:""}},[a("v-card-subtitle",{staticClass:"pa-0"},[t._v(t._s(t.itemType))]),a("v-card-title",{staticClass:"pa-0"},[t._v(" "+t._s(t.item.name)+" ")])],1),a("v-spacer"),a("get-directions",{attrs:{item:t.item,type:t.type}}),a("v-btn",{attrs:{icon:"","aria-label":"Close drawer",title:"Close drawer"},on:{click:function(e){return e.stopPropagation(),t.closeDrawer.apply(null,arguments)}}},[a("v-icon",[t._v("map")])],1),t.checkAuth?a("item-menu",{attrs:{item:t.item,type:t.type}}):t._e()],1),a("v-card",{attrs:{text:"",flat:""}},[a("v-card-text",[t._t("item-details")],2)],1),t.item.link&&t.item.links.length?a("external-link-list",{attrs:{links:t.item.links}}):t._e(),a("v-tabs",{attrs:{grow:"","mobile-break-point":"300"},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[t.hasAreas?a("v-tab",{attrs:{href:"#areas"}},[t._v("Areas")]):t._e(),t.hasRoutes?a("v-tab",{attrs:{href:"#routes"}},[t._v("Routes")]):t._e(),t.hasPitches?a("v-tab",{attrs:{href:"#pitches"}},[t._v("Pitches")]):t._e(),t.hasImages?a("v-tab",{attrs:{href:"#pictures"}},[t._v("Photos")]):t._e(),a("v-tabs-items",{staticClass:"mt-2",model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[t.hasAreas?a("v-tab-item",{attrs:{value:"areas"}},[a("area-list",{attrs:{area:t.item,searchable:!0}})],1):t._e(),t.hasRoutes?a("v-tab-item",{attrs:{value:"routes"}},[a("route-list")],1):t._e(),t.hasPitches?a("v-tab-item",{attrs:{value:"pitches"}},[a("pitch-list",{attrs:{route:t.item}})],1):t._e(),t.hasImages?a("v-tab-item",{attrs:{value:"pictures",eager:""}},[t.item.images?a("image-list",{attrs:{imageIds:t.item.images}}):t._e()],1):t._e()],1)],1)],1)],1)}),jt=[],Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.images.length?a("div",t._l(t.images,(function(t){return a("image-list-item",{key:t.id,attrs:{image:t}})})),1):t._e()},Et=[],St=a("c034"),Mt={props:{imageIds:Array},computed:{images:function(){var t=this,e=[];return this.imageIds.forEach((function(a){var n=t.$store.state.image.byIds[a];n&&e.push(n)})),e}},components:{ImageListItem:St["a"]}},$t=Mt,Pt=Object(f["a"])($t,Lt,Et,!1,null,null,null),Ft=Pt.exports,Dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-list",{attrs:{"two-line":""}},[a("v-list-item",[a("v-list-item-icon",[a("route-filters-button",{attrs:{icon:""}})],1),a("v-list-item-content",[a("v-text-field",{attrs:{label:"Search",loading:t.loading},model:{value:t.routeQueryString,callback:function(e){t.routeQueryString=e},expression:"routeQueryString"}})],1)],1),t.wasFiltered?a("v-list-item",[a("filtering-alert",{attrs:{type:"routes"}})],1):t._e(),t._l(t.routes,(function(t){return a("route-list-item",{key:t.id,attrs:{route:t}})})),a("v-list-item",[a("v-list-item-content",[a("div",{directives:[{name:"intersect",rawName:"v-intersect",value:t.loadOnIntersect,expression:"loadOnIntersect"}]})])],1),t.loading?a("v-list-item",[a("v-list-item-content",[a("v-progress-circular",{attrs:{indeterminate:""}})],1)],1):t._e()],2)],1)},Rt=[],Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-item",{class:{route_list_hover:t.highlight,list_border:!0},on:{click:function(e){return e.preventDefault(),t.link()}},nativeOn:{mouseenter:function(e){return t.onMouseOver()},mouseleave:function(e){return t.onMouseOut()}}},[a("v-list-item-content",{staticClass:"pl-2"},[a("v-list-item-subtitle",[t._v(" "+t._s(t.nextAreaName)+" ")]),a("v-list-item-title",[t._v(t._s(t.route.name))]),a("v-list-item-subtitle",[a("v-layout",{attrs:{"justify-space-between":""}},[a("div",[t._v(t._s(t.grade))]),a("div",[t._v(t._s(t.length))])])],1)],1),t.canTag?a("v-list-item-action",[a("tag-control",{attrs:{type:t.type,item:t.route}})],1):t._e()],1)},zt=[],Nt=(a("c975"),a("ac1f"),a("1276"),a("69c5")),Wt=a("a96b"),Gt={props:["route"],computed:{canTag:function(){return $["d"].canTag(this.type,this.route.type_id)},highlight:function(){return P["a"].key===this.key},typeName:function(){return $["d"].getTypeName(this.type,this.route.type_id)},key:function(){return this.type+this.route.id},grade:function(){return this.route&&Wt["a"].forge(this.route.grades)},type:function(){return $["b"].Route},length:function(){return this.route.length?this.route.length+"m":""},nextAreaName:function(){if(!this.route)return"";var t=this.route.path.split("."),e=this.$router.currentRoute.params.areaId;if(!e)return"";var a=t.indexOf(e);if(-1!==a){var n=a+1,r=null;if(r=n<t.length?this.$store.state.area.byIds[t[n]]:this.$store.state.area.byIds[e],r)return $["d"].getTypeName($["b"].Area,r.type_id)+": "+r.name}return""}},methods:{link:function(){this.onMouseOut(),this.$router.push(en(this.type,this.route.id))},onMouseOver:function(){P["a"].key=this.key},onMouseOut:function(){P["a"].key=null}},components:{TagControl:Nt["a"]}},Xt=Gt,qt=(a("1344"),a("da13")),Ht=a("1800"),Qt=Object(f["a"])(Xt,Bt,zt,!1,null,null,null),Ut=Qt.exports;h()(Qt,{VLayout:kt["a"],VListItem:qt["a"],VListItemAction:Ht["a"],VListItemContent:B["a"],VListItemSubtitle:B["b"],VListItemTitle:B["c"]});var Jt={cancelToken:null,components:{RouteListItem:Ut,RouteFiltersButton:J,FilteringAlert:et},created:function(){0===this.routes.length&&this.loadRoutesOnce(100)},computed:Object(n["a"])({},Object(l["c"])({routes:"route/getFiltered",filters:"route/filters",area:"area/get"}),{wasFiltered:function(){var t=this.$store.state.route.filters;return t&&(t.gradeTypes||t.gradeWeights||t.orientation&&0!==t.orientation.length||t.query||t.length)}},Object(l["e"])({loading:function(t){return t.route.loading}}),{routeQueryString:{get:function(){return this.filters.query},set:function(t){this.setQueryString(t),this.loadRoutesOnce(1e3)}}}),methods:Object(n["a"])({},Object(l["b"])({loadRoutes:"route/loadFiltered",openAuthorizedForm:"form/authorizeAndOpen"}),{},Object(l["d"])({setQueryString:"route/setQueryString"}),{loadOnIntersect:function(t){t[0].isIntersecting&&this.loadRoutesOnce(100)},loadRoutesOnce:function(t){var e=this;this.$options.cancelToken&&clearTimeout(this.$options.cancelToken),this.$options.cancelToken=setTimeout((function(){return e.loadRoutes()}),t)}})},Zt=Jt,Yt=a("8860"),Kt=a("34c3"),te=Object(f["a"])(Zt,Dt,Rt,!1,null,null,null),ee=te.exports;h()(te,{VList:Yt["a"],VListItem:qt["a"],VListItemContent:B["a"],VListItemIcon:Kt["a"],VProgressCircular:it["a"],VTextField:dt["a"]}),ft()(te,{Intersect:pt["a"]});var ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"pitch_table"},[t._m(0),a("tbody",t._l(t.pitches,(function(e,n){return a("tr",{key:n,class:{pitch_row_hover:t.highlighted(t.type+e.id),list_border:!0},on:{mouseenter:function(a){return t.onMouseEnter(t.type+e.id)},mouseleave:function(e){return t.onMouseLeave()}}},[a("td",[t._v(t._s(n+1))]),a("td",[t._v(t._s(t.forgeGrade(e.grades)))]),a("td",[t._v(t._s(e.length?e.length+"m":""))]),a("td",[t.notMap?a("tag-control",{attrs:{type:"pitch",item:e}}):t._e(),a("v-btn",{attrs:{text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.openAuthorizedForm({form:{component:"pitch-form",params:{pitch:e,route:t.route}},item:e})}}},[a("v-icon",[t._v("edit")])],1),a("delete-button",{attrs:{type:"pitch",item:e}})],1)])})),0)])},ne=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Pitch")]),a("th",{staticClass:"text-left"},[t._v("Grade")]),a("th",{staticClass:"text-left"},[t._v("Length")]),a("th",{staticClass:"text-left"})])])}],re=a("b79f"),ie={props:["route"],computed:{type:function(){return $["b"].Pitch},notMap:function(){return!!this.$route.params.imageId},pitches:function(){var t=this,e=[];return this.route.pitches&&this.route.pitches.forEach((function(a){var n=t.$store.state.pitch.byIds[a];n&&e.push(n)})),e}},methods:Object(n["a"])({},Object(l["b"])({openAuthorizedForm:"form/authorizeAndOpen"}),{onMouseEnter:function(t){P["a"].key=t},onMouseLeave:function(){P["a"].key=null},forgeGrade:function(t){return t?Wt["a"].forge(t):""},highlighted:function(t){return t===P["a"].key}}),components:{TagControl:Nt["a"],DeleteButton:re["a"]}},oe=ie,se=(a("9da2"),Object(f["a"])(oe,ae,ne,!1,null,null,null)),ce=se.exports;h()(se,{VBtn:g["a"],VIcon:R["a"]});var ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"pa-2"},[a("v-card-subtitle",{staticClass:"pa-1"},[t._v("Links with more info")]),a("v-card-text",{staticClass:"pa-0"},[a("v-list",{staticClass:"pa-0"},t._l(t.links,(function(e){return a("v-list-item",{key:e.id,staticClass:"pl-1"},[a("v-list-item-content",[a("v-list-item-title",[a("a",{attrs:{tag:"a",target:"_blank",href:e.href}},[t._v(t._s(e.name))])])],1)],1)})),1)],1)],1)},le=[],de={props:["links"],computed:{hasAny:function(){return this.links&&0!==this.links.length}}},me=de,fe=a("b0af"),pe=a("99d9"),he=Object(f["a"])(me,ue,le,!1,null,null,null),ge=he.exports;h()(he,{VCard:fe["a"],VCardSubtitle:pe["b"],VCardText:pe["c"],VList:Yt["a"],VListItem:qt["a"],VListItemContent:B["a"],VListItemTitle:B["c"]});var ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{left:"",bottom:"","close-on-click":!0,"close-on-content-click":!0,"z-index":"3000"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{text:"",icon:"",title:"Show menu"}},"v-btn",r,!1),n),[a("v-icon",[t._v("more_vert")])],1)]}}])},[a("div",{staticClass:"d-flex flex-column align-stretch",staticStyle:{background:"white"}},[a("v-btn",{staticClass:"justify-start",attrs:{text:"",title:"Edit this area"},on:{click:function(e){return e.stopPropagation(),t.openEditForm()}}},[a("v-icon",[t._v("edit")]),t._v(" Edit ")],1),t.canAdopt?a("v-btn",{staticClass:"justify-start",attrs:{text:"",title:"Move item into this area"},on:{click:function(e){return t.setAdoptingParent(t.item.id)}}},[a("v-icon",[t._v("pin_drop")]),t._v(" Drop item here ")],1):t._e(),t.canMove?a("v-btn",{staticClass:"justify-start",attrs:{text:"",title:"Move this "+this.type+" to another area"},on:{click:function(e){return t.setChildForAdoption({type:t.type,item:t.item})}}},[a("v-icon",[t._v("import_export")]),t._v(" Move "+t._s(this.type)+" ")],1):t._e(),t.canTag?a("tag-control",{attrs:{type:t.type,item:t.item,"show-text":"",stop:!1}}):t._e(),t.canTagCurrentLocation?a("current-location-tagger",{attrs:{type:t.type,item:t.item,"show-text":""}}):t._e(),a("delete-button",{attrs:{type:t.type,item:t.item,"return-back":"","show-text":""}}),t.hasTrails?a("add-trail",{attrs:{area:t.item,"show-text":""}}):t._e(),t.canHaveArea?a("v-btn",{staticClass:"justify-start",attrs:{title:"Add area",text:""},on:{click:function(e){return e.stopPropagation(),t.openAuthorizedForm({form:{component:"area-form",params:{parent:t.item}}})}}},[a("v-icon",[t._v("add")]),t._v(" Add subarea ")],1):t._e(),t.canAddRoute?a("v-btn",{staticClass:"justify-start",attrs:{text:"",title:"Add route"},on:{click:function(e){return e.stopPropagation(),t.openAuthorizedForm({form:{component:"route-form",params:{area:t.item}}})}}},[a("v-icon",[t._v("add")]),t._v(" Add route ")],1):t._e(),t.canHavePitch?a("v-btn",{staticClass:"justify-start",attrs:{text:"",title:"Add pitch"},on:{click:function(e){return e.stopPropagation(),t.openAuthorizedForm({form:{component:"pitch-form",params:{route:t.item}}})}}},[a("v-icon",[t._v("add")]),t._v(" Add pitch ")],1):t._e(),t.canAddImage?a("v-btn",{staticClass:"justify-start",attrs:{text:"",title:"Upload photo"},on:{click:function(e){return e.stopPropagation(),t.openAuthorizedForm({form:{component:"image-upload-form",params:{type:t.type,id:t.item.id}}})}}},[a("v-icon",[t._v("add_photo_alternate")]),t._v(" Upload photo ")],1):t._e()],1)])},be=[],ye=(a("caad"),a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{class:{"menu-button":t.showText},attrs:{text:"",icon:!t.showText,title:"Tag "+t.type+" at my current location",block:t.showText},on:{click:function(e){return t.setTag()}}},[a("v-icon",[t._v("gps_fixed")]),t.showText?a("span",[t._v(" Tag "+t._s(t.type)+" at my location")]):t._e()],1)}),Ie=[],_e={props:{type:String,item:Object,showText:Boolean},methods:{setTag:function(){var t=this;a.e("drawing.service").then(a.bind(null,"cb8b")).then((function(e){e.default.setTagAtCurrentLocation(t.type,t.item)}))}}},we=_e,ke=Object(f["a"])(we,ye,Ie,!1,null,null,null),Ae=ke.exports;h()(ke,{VBtn:g["a"],VIcon:R["a"]});var xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.drawing?t._e():a("div",{staticStyle:{display:"inline"}},[a("v-btn",{class:{"menu-button":t.showText},attrs:{text:"",icon:!t.showText,title:"Add trail",block:t.showText},on:{click:t.createTag}},[a("v-icon",[t._v("timeline")]),t.showText?a("span",[t._v("Add trail")]):t._e()],1)],1)},Oe=[],Te=r["a"].extend({props:{area:Object,showText:Boolean},computed:{drawing:function(){return this.$store.state.drawing}},methods:{createTag:function(){var t=this;this.closeDrawerIfMobile(),a.e("drawing.service").then(a.bind(null,"cb8b")).then((function(e){e.default.createTag("trail",{id:t.area.id})}))},closeDrawerIfMobile:function(){this.$vuetify.breakpoint.xs&&w["a"].setLeft(!1)}}}),Ce=Te,Ve=Object(f["a"])(Ce,xe,Oe,!1,null,null,null),je=Ve.exports;h()(Ve,{VBtn:g["a"],VIcon:R["a"]});var Le={props:["type","item"],computed:{canAdopt:function(){if(this.isRoute)return!1;var t=this.$store.state.adoption;return t.item&&!(t.type===$["b"].Area&&(t.item.id===this.item.id||this.item.ancestors.includes(t.item.id)))},parentId:function(){return this.item&&(this.item.parent_id||this.item.area_id)||null},canMove:function(){return null!==this.parentId},canTag:function(){return $["d"].canTag(this.type,this.item.type_id)},canTagCurrentLocation:function(){return $["d"].canTagCurrentLocation(this.type,this.item.type_id)},hasTrails:function(){return $["d"].hasTrails(this.type,this.item.type_id)},canHaveArea:function(){return $["d"].hasAreas(this.type,this.item)},isArea:function(){return this.type===$["b"].Area},isRoute:function(){return this.type===$["b"].Route},canAddImage:function(){return $["d"].canAddImage(this.type,this.item.type_id)},canAddRoute:function(){return $["d"].canAddRoute(this.type,this.item.type_id)},canHavePitch:function(){return $["d"].hasPitches(this.type,this.item.type_id)}},components:{TagControl:Nt["a"],DeleteButton:re["a"],CurrentLocationTagger:Ae,AddTrail:je},methods:Object(n["a"])({},Object(l["b"])({openAuthorizedForm:"form/authorizeAndOpen",openOnlyAdminForm:"form/onlyAdminOpen",setChildForAdoption:"adoption/setChild",setAdoptingParent:"adoption/setParent"}),{getParent:function(){return this.parentId?this.$store.state.area.byIds[this.parentId]:null},openEditForm:function(){var t=this.getParent(),e={form:{component:this.type+"-form",params:{}},item:this.item};if(this.isArea)e.form.params={area:this.item,parent:t};else{if(!this.isRoute)return void this.$store.dispatch("snackbar/throwError",500);e.form.params={route:this.item,area:t}}this.openAuthorizedForm(e)}})},Ee=Le,Se=a("e449"),Me=Object(f["a"])(Ee,ve,be,!1,null,null,null),$e=Me.exports;h()(Me,{VBtn:g["a"],VIcon:R["a"],VMenu:Se["a"]});var Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.canGetDirections?a("v-btn",{attrs:{icon:"",title:"Get directions for this area"},on:{click:function(e){return t.openInGoogle()}}},[a("v-icon",[t._v("directions_car")])],1):t._e()},Fe=[],De={props:["type","item"],computed:{canGetDirections:function(){return $["d"].canGetDirections(this.type,this.item)}},methods:{openInGoogle:function(){var t=this.item.map_tag.geometry.coordinates,e=window.open("https://www.google.com/maps/dir/?api=1&travelmode=driving&destination="+t[1]+","+t[0],"_blank");e.focus()}}},Re=De,Be=Object(f["a"])(Re,Pe,Fe,!1,null,null,null),ze=Be.exports;h()(Be,{VBtn:g["a"],VIcon:R["a"]});var Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{icon:"",title:"Go back","aria-label":"Go back"},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",[t._v("arrow_back")])],1)},We=[],Ge={},Xe=Object(f["a"])(Ge,Ne,We,!1,null,null,null),qe=Xe.exports;h()(Xe,{VBtn:g["a"],VIcon:R["a"]});var He={props:["item","type"],data:function(){return{tabs:null}},computed:Object(n["a"])({hasImages:function(){return this.item.images&&this.item.images.length},hasRoutes:function(){return $["d"].hasRoutes(this.type,this.item.type_id)},hasPitches:function(){return this.item.pitches&&this.item.pitches.length},hasAreas:function(){return this.item.areas&&0!==this.item.areas.length},itemType:function(){return $["d"].getTypeName(this.type,this.item.type_id)}},Object(l["c"])({checkAuth:"auth/check"})),methods:Object(n["a"])({},Object(l["b"])({openAuthorizedForm:"form/authorizeAndOpen"}),{closeDrawer:function(){this.$store.getters.imageOpen&&this.$router.push(en("image",null)),w["a"].setLeft(!1)},setTitle:function(){this.item&&Object(vt["a"])(this.item.name)}}),created:function(){this.setTitle()},watch:{item:function(t){this.tabs=t&&this.item.children?"areas":"pitches",this.setTitle()}},components:{ImageList:Ft,AreaList:gt,RouteList:ee,ExternalLinkList:ge,PitchList:ce,ItemMenu:$e,GetDirections:ze,BackButton:qe}},Qe=He,Ue=a("71a3"),Je=a("c671"),Ze=a("fe57"),Ye=a("aac8"),Ke=Object(f["a"])(Qe,Vt,jt,!1,null,null,null),ta=Ke.exports;h()(Ke,{VBtn:g["a"],VCard:fe["a"],VCardSubtitle:pe["b"],VCardText:pe["c"],VCardTitle:pe["d"],VContainer:rt["a"],VIcon:R["a"],VLayout:kt["a"],VSpacer:At["a"],VTab:Ue["a"],VTabItem:Je["a"],VTabs:Ze["a"],VTabsItems:Ye["a"]});var ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("canvas",{attrs:{id:t.divId,height:"250"}})},aa=[],na=(a("96cf"),a("1da1")),ra=a("a005"),ia={props:["type","stats"],computed:{divId:function(){return"statistics-chart"+this.type},gradeTypeObject:function(){return Wt["a"].types[this.type]},gradeChartArray:function(){return Wt["a"].charts[this.gradeTypeObject.charts[0]]},data:function(){var t=[];for(var e in this.gradeChartArray)this.stats[e]?t.push(this.stats[e]):t.push(0);return t}},mounted:function(){var t=this;return Object(na["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=10===parseInt(t.type)?ra["b"]:"grey",a.e("chart-js").then(a.t.bind(null,"30ef",7)).then((function(e){var a=e.default,r=document.getElementById(t.divId);new a(r,{type:"bar",data:{labels:t.gradeChartArray,datasets:[{label:"Routes ",data:t.data}]},options:{legend:{display:!1},title:{text:t.gradeTypeObject.name,display:!0},elements:{rectangle:{backgroundColor:n}},scales:{yAxes:[{ticks:{beginAtZero:!0,precision:0}}]}}})}));case 2:case"end":return e.stop()}}),e)})))()}},oa=ia,sa=Object(f["a"])(oa,ea,aa,!1,null,null,null),ca=sa.exports,ua=a("c6a6"),la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("canvas",{attrs:{id:t.divId,height:"250"}}):t._e()},da=[],ma=(a("07ac"),a("ddb0"),{props:["stats"],computed:{divId:function(){return"length-chart"},data:function(){return Object.values(this.stats)},keys:function(){var t=[];for(var e in this.stats)t.push(e+"m");return t},show:function(){return this.stats&&!Array.isArray(this.stats)}},mounted:function(){var t=this;this.show&&a.e("chart-js").then(a.t.bind(null,"30ef",7)).then((function(e){var a=e.default,n=document.getElementById(t.divId);new a(n,{type:"bar",data:{labels:t.keys,datasets:[{label:"Routes ",data:t.data}]},options:{legend:{display:!1},title:{text:"Route lengths",display:!0},elements:{rectangle:{backgroundColor:"grey"}},scales:{yAxes:[{ticks:{beginAtZero:!0,precision:0}}]}}})}))}}),fa=ma,pa=Object(f["a"])(fa,la,da,!1,null,null,null),ha=pa.exports,ga=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.orientations?a("canvas",{attrs:{id:t.divId,height:"250"}}):t._e()},va=[],ba={props:["orientations"],computed:{divId:function(){return"orientations-chart"}},mounted:function(){var t=this;return Object(na["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.orientations){e.next=2;break}return e.abrupt("return");case 2:a.e("chart-js").then(a.t.bind(null,"30ef",7)).then((function(e){var a=e.default,n=document.getElementById(t.divId);new a(n,{type:"radar",data:{labels:["N","NE","E","SE","S","SW","W","NW"],datasets:[{label:"Route orientations (%)",data:Object.values(t.orientations)}]},options:{scale:{ticks:{suggestedMin:0,suggestedMax:50}}}})}));case 3:case"end":return e.stop()}}),e)})))()}},ya=ba,Ia=Object(f["a"])(ya,ga,va,!1,null,null,null),_a=Ia.exports,wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.hasAnyModerators?a("v-expansion-panels",{attrs:{flat:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Moderators")]),a("v-expansion-panel-content",[a("v-list",t._l(t.moderators,(function(e){return a("v-list-item",{key:e.id},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}})],1),a("v-list-item-action",[a("div",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return a.stopPropagation(),t.remove(e)}}},[a("v-icon",[t._v("delete")])],1)],1)])],1)})),1)],1)],1)],1):t._e()},ka=[],Aa=a("842b"),xa={props:["moderators","area"],computed:{hasAnyModerators:function(){return 0!==this.moderators.length}},methods:{remove:function(t){var e=this;Aa["a"].get("admin/user/"+t.id+"/removeArea/"+this.area.id).then((function(){e.$store.commit("area/removeModerator",{area:e.area,moderator:t}),e.$store.dispatch("snackbar/success",t.name+" removed as moderator to "+e.area.name)})).finally((function(){return e.isLoading=!1}))}}},Oa=xa,Ta=a("cd55"),Ca=a("49e2"),Va=a("c865"),ja=a("0393"),La=Object(f["a"])(Oa,wa,ka,!1,null,null,null),Ea=La.exports;h()(La,{VBtn:g["a"],VExpansionPanel:Ta["a"],VExpansionPanelContent:Ca["a"],VExpansionPanelHeader:Va["a"],VExpansionPanels:ja["a"],VIcon:R["a"],VList:Yt["a"],VListItem:qt["a"],VListItemAction:Ht["a"],VListItemContent:B["a"],VListItemTitle:B["c"]});var Sa={mixins:[It],computed:Object(n["a"])({},Object(l["c"])({area:"area/get"}),{loading:function(){return this.$store.state.area.loading||!this.area},type:function(){return $["b"].Area},moderators:function(){var t=this;if(!this.area||!this.area.moderators)return[];var e=[];return this.area.moderators.forEach((function(a){var n=t.$store.getters["user/find"](a);n&&e.push(n)})),e}}),components:{DetailsLayout:ta,DetailsLoading:ct,ModeratorList:Ea,StatisticsChart:ca,LengthChart:ha,AreaStats:ua["a"],OrientationsChart:_a},methods:{typeName:function(t){return Wt["a"].types[t].name}}},Ma=Sa,$a=a("ce7e"),Pa=Object(f["a"])(Ma,Tt,Ct,!1,null,null,null),Fa=Pa.exports;h()(Pa,{VCardSubtitle:pe["b"],VDivider:$a["a"],VExpansionPanel:Ta["a"],VExpansionPanelContent:Ca["a"],VExpansionPanelHeader:Va["a"],VExpansionPanels:ja["a"]});var Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("details-loading"):a("details-layout",{attrs:{item:t.route,type:t.type}},[a("template",{slot:"item-details"},[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"stat_name"},[t._v("Grade")]),a("td",[t._v(t._s(t.grade))])]),a("tr",[a("td",{staticClass:"stat_name"},[t._v("Length")]),a("td",[t._v(t._s(t.route.length)+"m")])]),a("tr",[a("td",{staticClass:"stat_name"},[t._v("Orientation")]),a("td",[t._v(t._s(t.orientation))])])])])])],2)},Ra=[],Ba={mixins:[It],computed:Object(n["a"])({},Object(l["c"])({route:"route/get"}),{loading:function(){return this.$store.state.route.loading||this.$store.state.area.loading||!this.route},area:function(){return this.route&&this.$store.state.area.byIds[this.route.area_id]},orientation:function(){return!this.loading&&this.route&&$["d"].orientation.getLabel(this.route.orientation||this.area.orientation)},grade:function(){var t;return(null===(t=this.route)||void 0===t?void 0:t.grades)&&Wt["a"].forge(this.route.grades)},type:function(){return $["b"].Route}}),components:{DetailsLayout:ta,DetailsLoading:ct}},za=Ba,Na=Object(f["a"])(za,Da,Ra,!1,null,null,null),Wa=Na.exports;r["a"].use(i["a"]);var Ga=function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("admin.panel")]).then(a.bind(null,"bb47"))},Xa=function(){return a.e("privacy.policy").then(a.bind(null,"adb4"))},qa=function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("admin.panel")]).then(a.bind(null,"080b"))},Ha=function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("admin.panel")]).then(a.bind(null,"51e9"))},Qa=function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("admin.panel")]).then(a.bind(null,"dfbc"))},Ua=function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("admin.panel")]).then(a.bind(null,"ed27"))},Ja=function(){return Promise.all([a.e("admin.panel~area.form~moderator.form~route.filters~route.form"),a.e("admin.panel")]).then(a.bind(null,"9fc6"))},Za=function(){return a.e("leaflet.map").then(a.bind(null,"6f6b"))},Ya=function(){return a.e("image.map").then(a.bind(null,"d82e"))},Ka=[{path:"/",component:C,children:[{path:"",components:{default:Ot,map:Za}},{path:"/privacy",components:{default:Ot,map:Xa}},{path:"image/:imageId",components:{default:Ot,map:Ya}},{path:"a/:path/:areaId",components:{default:Fa,map:Za}},{path:"a/:path/:areaId/image/:imageId",components:{default:Fa,map:Ya}},{path:"r/:path/:routeId",components:{default:Wa,map:Za}},{path:"r/:path/:routeId/image/:imageId",components:{default:Wa,map:Ya}},{path:"/auth/:provide/callback",component:{template:'<div class="auth-component"></div>'}}]},{path:"/admin",component:Ga,beforeEnter:function(t,e,a){bt["a"].dispatch("auth/authorizeOnlyAdmin").then((function(){a()})).catch((function(){}))},children:[{path:"",components:{default:qa,content:Ha}},{path:"users",components:{default:qa,content:Ha}},{path:"user/:id",components:{default:qa,content:Ja}},{path:"images",components:{default:qa,content:Ua}},{path:"activities",components:{default:qa,content:Qa}}]},{path:"*",redirect:"/"}],tn=new i["a"]({mode:"history",routes:Ka});function en(t,e){var a=Object(n["a"])({},tn.currentRoute.params),r=bt["a"].getters.urlPath(t,e);r||(r=a.path),r+="/","image"===t?a.imageId=e:"area"===t?(delete a.routeId,a.areaId=e):(delete a.areaId,a.routeId=e);var i="";return a.areaId?i="/a/"+r+a.areaId:a.routeId&&(i="/r/"+r+a.routeId),a.imageId&&(i+="/image/"+a.imageId),""===i?"/":i}e["a"]=tn},b005:function(t,e,a){"use strict";var n=a("2b0e"),r={state:n["a"].observable({left:!0,right:!1}),setLeft:function(t){this.state.left=t},setRight:function(t){this.state.right=t}};e["a"]=r},b79f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"inline"}},[a("v-btn",{class:{"menu-button":t.showText},attrs:{text:"",icon:!t.showText,title:"Delete "+t.type,block:t.showText},on:{click:function(e){return e.stopPropagation(),t.showDialog()}}},[a("v-icon",[t._v("delete")]),t.showText?a("div",[t._v("Delete")]):t._e()],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v("Are you sure ?")]),a("v-card-text",[t._v("Deleting this "+t._s(t.type)+" will remove all refrences to it as well as all depended items.")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:"",icon:"",title:"Dismiss action"},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("close")])],1),a("v-btn",{attrs:{text:"",icon:"",title:"Confirm delete"},on:{click:function(e){return t.confirmDelete()}}},[a("v-icon",[t._v("check")])],1)],1)],1)],1)],1)},r=[],i=a("2b0e"),o=a("842b"),s=a("afbc"),c=i["a"].extend({props:{type:String,item:Object,returnBack:Boolean,showText:Boolean},data:function(){return{dialog:!1}},methods:{showDialog:function(){var t=this;this.$store.dispatch("auth/authorize",this.item).then((function(){t.dialog=!0}),(function(){}))},confirmDelete:function(){var t=this;o["a"].delete(this.type+"/"+this.item.id).then((function(){var e=t.$store.getters.imageOpen;"tag"===t.type?e?t.$store.commit("image/removeImageTag",{imageId:e,tag:t.item}):t.$store.commit(t.item.tagged_type+"/removeMapTag",t.item.tagged_id):("image"===t.type&&parseInt(e)===t.item.id&&t.$router.push(Object(s["b"])("image",null)),t.returnBack&&t.$router.back(),t.$store.commit(t.type+"/remove",t.item)),t.$store.dispatch("snackbar/success","Deleted!")})),this.dialog=!1}}}),u=c,l=a("2877"),d=a("6544"),m=a.n(d),f=a("8336"),p=a("b0af"),h=a("99d9"),g=a("169a"),v=a("132d"),b=a("2fa4"),y=Object(l["a"])(u,n,r,!1,null,null,null);e["a"]=y.exports;m()(y,{VBtn:f["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["c"],VCardTitle:h["d"],VDialog:g["a"],VIcon:v["a"],VSpacer:b["a"]})},c034:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-img",{key:t.image.id,staticClass:"image-item",attrs:{src:t.src,contain:"",eager:""},on:{load:function(e){return t.imageLoaded()}},nativeOn:{click:function(e){return t.open(t.image.id)}}},[t.loading?a("v-skeleton-loader",{staticClass:"mx-auto",attrs:{width:"400",type:"image, actions"}}):t._e(),t.loading?t._e():a("v-overlay",{attrs:{absolute:!0,value:!0}},[t._v(" Click me ")]),t.loading?t._e():a("div",{staticClass:"image-controls"},[a("tag-control",{attrs:{type:"image",item:t.image}}),a("delete-button",{attrs:{type:"image",item:t.image}})],1)],1)},r=[],i=a("69c5"),o=a("b79f"),s=a("afbc"),c=a("5033"),u=a("b005"),l={props:["image"],data:function(){return{loading:!0,src:""}},created:function(){var t=this;this.image&&c["a"].getImage(this.image.id,"thumbnail").then((function(e){t.src=e}))},methods:{open:function(t){this.$router.push(Object(s["b"])("image",t)),u["a"].setLeft(!1)},imageLoaded:function(){this.loading=!1}},components:{TagControl:i["a"],DeleteButton:o["a"]}},d=l,m=(a("4b95"),a("2877")),f=a("6544"),p=a.n(f),h=a("adda"),g=a("a797"),v=a("3129"),b=Object(m["a"])(d,n,r,!1,null,null,null);e["a"]=b.exports;p()(b,{VImg:h["a"],VOverlay:g["a"],VSkeletonLoader:v["a"]})},c6a6:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("tbody",[null!==t.item.altitude[0]&&null!==t.item.altitude[1]?a("tr",[a("td",{staticClass:"stat_name"},[t._v("Altitude")]),a("td",[t._v(t._s(t.item.altitude[0]+"m - "+t.item.altitude[1]+"m"))])]):t._e(),t.hasOrientation?a("tr",[a("td",{staticClass:"stat_name"},[t._v("Orientation")]),a("td",[t._v(t._s(t.orientation))])]):t._e(),a("tr",[a("td",{staticClass:"stat_name"},[t._v("Topos coverage")]),a("td",[t._v(t._s((100*t.item.tag_coverage).toFixed(2))+" %")])]),a("tr",[a("td",{staticClass:"stat_name"},[t._v("Photos")]),a("td",[t._v(t._s(t.item.image_count))])]),a("tr",[a("td",{staticClass:"stat_name"},[t._v("Trails")]),a("td",[t._v(t._s(t.item.trail_count))])]),t._l(Object.keys(t.routeStats),(function(e){return a("tr",{key:e},[a("td",{staticClass:"stat_name"},[t._v(t._s(t.routeType(e)))]),a("td",[t._v(t._s(t.routeStats[e]))])])}))],2)])},r=[],i=(a("4160"),a("159b"),a("2b0e")),o=a("5d57"),s=i["a"].extend({props:["item"],computed:{routeStats:function(){var t={};return this.item&&this.item.route_stats&&this.item.route_stats.forEach((function(e,a){0!==e&&(t[a]=e)})),t},hasOrientation:function(){return this.item&&null!==this.item.orientation&&o["d"].hasOrientation(o["b"].Area,this.item.type_id)},orientation:function(){return o["d"].orientation.getLabel(this.item.orientation)}},methods:{routeType:function(t){return o["d"].getTypeName(o["b"].Route,parseInt(t))}}}),c=s,u=(a("dd75"),a("2877")),l=Object(u["a"])(c,n,r,!1,null,null,null);e["a"]=l.exports},cd49:function(t,e,a){"use strict";a.r(e);a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("841c"),a("ddb0"),a("2b3d"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},i=[],o=a("2877"),s={},c=Object(o["a"])(s,r,i,!1,null,null,null),u=c.exports,l=a("afbc"),d=a("0613"),m=a("0670"),f=(a("35c2"),a("3a62"),a("2ad9")),p=a("31bd"),h=a("1547");h["a"].isNativePlatform()||a.e("chunk-601f2513").then((function(){(function(t){var e=[a("bb3e")];(function(t){n["a"].prototype.$workbox=t.wb}).apply(null,e)}).call(this,a("dd40")(t))})).catch(a.oe),Object(p["sync"])(d["a"],l["a"],{moduleName:"url"}),n["a"].config.productionTip=!1,f["a"].addListener("backButton",(function(){window.history.length<5&&"/"===l["a"].currentRoute.path?f["a"].exitApp():l["a"].back()})),new n["a"]({router:l["a"],store:d["a"],vuetify:m["a"],render:function(t){return t(u)},created:function(){var t=this;if(!this.$store.getters["auth/check"]){var e=new URLSearchParams(window.location.search),a=e.get("token");a&&this.$store.dispatch("auth/login",a).then((function(){t.$router.replace({path:t.$router.currentRoute.path,query:{}})}))}}}).$mount("#app")},cdd0:function(t,e,a){"use strict";a.r(e);var n;a("b0c0"),a("d3b7"),a("ac1f"),a("1276");(function(t){t[t["ADMIN"]=1]="ADMIN",t[t["USER"]=2]="USER"})(n||(n={}));var r=!0,i={namespaced:r,state:{token:"",user:void 0},mutations:{login:function(t,e){t.token=e.token,t.user=e.user},logout:function(t){t.token="",t.user=void 0}},actions:{login:function(t,e){var a,n=t.commit,r=t.dispatch,i=t.state,o={token:e,user:JSON.parse(atob(e.split(".")[1]))};n("login",o),r("snackbar/success","Successfully logged in<br> Welcome, "+(null===(a=i.user)||void 0===a?void 0:a.name),{root:!0}),r("form/close",null,{root:!0})},logout:function(t){var e=t.commit;e("logout")},authorize:function(t,e){var a=t.getters,n=t.dispatch,r=!e||a.authorize(e);return n("authorizationHandler",{isAuthorized:r})},authorizeOnlyAdmin:function(t){var e=t.getters,a=t.dispatch;return a("authorizationHandler",{isAuthorized:e.isAdmin})},authorizationHandler:function(t,e){var a=t.state,n=t.dispatch,r=e.isAuthorized;return new Promise((function(t,e){a.user?r?a.user&&r&&t():e(Error("403")):e(Error("401"))})).catch((function(t){throw n("unauthorized",t),t}))},unauthorized:function(t,e){var a=parseInt(e.message);t.dispatch("snackbar/throwError",{code:a},{root:!0}),401===a&&t.dispatch("form/open",{component:"login-form",params:null},{root:!0})}},getters:{check:function(t){return!!t.token&&!!t.user},authorize:function(t){return function(e){return!!t.user}},isAdmin:function(t){return t.user&&t.user.role_id===n.ADMIN},username:function(t,e){var a;return e.check?null===(a=t.user)||void 0===a?void 0:a.name:"User not logged in!"}}};e["default"]=i},dc3e:function(t,e,a){},dd75:function(t,e,a){"use strict";a("dc3e")},e127:function(t,e,a){},f33f:function(t,e,a){"use strict";a.r(e);a("4160"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("ddb0");var n=a("5530"),r=a("3f9b"),i={};r.keys().forEach((function(t){if("./index.ts"!==t){var e=t.replace(/(\.\/|\.ts)/g,"");i[e]=Object(n["a"])({namespaced:!0},r(t).default)}})),e["default"]=i},f41f:function(t,e,a){"use strict";var n=a("2b0e"),r=n["a"].observable({key:null});e["a"]=r}});
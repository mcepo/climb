(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["route.filters"],{"05d5":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card-text",{staticClass:"pt-0"},[a("v-select",{attrs:{items:t.items,"item-text":"label","item-value":"value",label:"Orientation",required:"",chips:t.multiple,multiple:t.multiple},on:{change:function(e){return t.$emit("input",t.model)}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)},s=[],n=(a("a9e3"),a("5d57")),l={props:{value:[Array,Number],multiple:Boolean},data:function(){return{model:null}},created:function(){this.model=this.value},computed:{items:function(){return n["d"].orientation.items}}},r=l,o=a("2877"),u=a("6544"),c=a.n(u),h=a("99d9"),d=a("b974"),v=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=v.exports;c()(v,{VCardText:h["c"],VSelect:d["a"]})},"33e9":function(t,e,a){},"45c7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-layout",{attrs:{column:""}},[a("v-card-title",[t._v(" Route filters ")]),a("v-flex",[a("v-card",{staticClass:"pa-1",attrs:{flat:""}},[a("orientation",{attrs:{multiple:""},model:{value:t.orientation,callback:function(e){t.orientation=e},expression:"orientation"}})],1)],1),a("v-flex",[a("v-card",{staticClass:"pa-1",attrs:{flat:""}},[a("v-card-title",{staticClass:"pa-0 justify-center"},[t._v("Length (m)")]),a("v-card-text",{staticClass:"pa-0"},[a("v-range-slider",{attrs:{max:t.maxLength,min:t.minLength,"thumb-label":"always","thumb-size":"34"},model:{value:t.length,callback:function(e){t.length=e},expression:"length"}})],1)],1)],1),t._l(t.filters,(function(e,i){return a("v-flex",{key:i},[a("v-card",{staticClass:"pa-1",attrs:{flat:""}},[a("v-card-title",{staticClass:"pa-0 justify-center"},[t._v(t._s(t.typeName(i)))]),a("v-card-text",{staticClass:"pa-0"},[a("v-range-slider",{attrs:{max:t.maxGrades[i],"thumb-label":"always",ticks:"always","thumb-size":"34"},scopedSlots:t._u([{key:"thumb-label",fn:function(e){return[a("span",[t._v(t._s(t.tickLabels[i][e.value]))])]}}],null,!0),model:{value:t.filters[i],callback:function(e){t.$set(t.filters,i,e)},expression:"filters[index]"}})],1)],1)],1)}))],2),a("v-btn",{staticClass:"ma-1",attrs:{color:"success"},on:{click:t.apply}},[t._v("Apply")]),a("v-btn",{staticClass:"ma-1",attrs:{color:"warning"},on:{click:t.disableAll}},[t._v("Disable all")]),a("v-btn",{staticClass:"ma-1",attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")])],1)],1)},s=[],n=(a("7db0"),a("4160"),a("b0c0"),a("159b"),a("2b0e")),l=a("05d5"),r=a("a96b"),o={data:function(){return{valid:!0,filters:[],maxGrades:[],tickLabels:[],length:[0,2e3],maxLength:2e3,minLength:0,orientation:[]}},components:{Orientation:l["a"]},created:function(){var t=this,e=this.$store.getters["route/filters"];r["a"].types.forEach((function(a,i){var s;t.maxGrades.push(r["a"].charts[a.charts[0]].length-1),s=e.gradeWeights&&e.gradeWeights[i]?e.gradeWeights[i]:e.gradeTypes&&void 0!==e.gradeTypes.find((function(t){return t===i}))?[0,0]:[0,r["a"].charts[a.charts[0]].length-1],t.filters.push(s),t.tickLabels.push(r["a"].charts[a.charts[0]]),e.length&&(t.length=e.length),e.orientation&&(t.orientation=e.orientation)}))},methods:{typeName:function(t){return r["a"].types[t].name},apply:function(){var t=this,e={gradeWeights:{},gradeTypes:[]},a=!1,i=!1;this.filters.forEach((function(s,n){(0!==s[0]||s[1]!==t.maxGrades[n]&&0!==s[1])&&(a=!0,e.gradeWeights[n]=s),0===s[0]&&0===s[1]&&(i=!0,e.gradeTypes.push(n))})),this.length[0]===this.minLength&&this.length[1]===this.maxLength||(e.length=this.length),a||delete e.gradeWeights,i||delete e.gradeTypes,this.orientation!==[]&&(e.orientation=this.orientation),this.$store.dispatch("route/loadFiltered",e),this.close()},close:function(){this.$store.dispatch("form/close")},disableAll:function(){this.filters.forEach((function(t,e,a){n["default"].set(a,e,[0,0])})),this.length=[0,0]}}},u=o,c=a("2877"),h=a("6544"),d=a.n(h),v=a("8336"),m=a("b0af"),p=a("99d9"),f=a("a523"),b=a("0e8f"),g=a("4bd4"),y=a("a722"),V=a("5963"),k=Object(c["a"])(u,i,s,!1,null,null,null);e["default"]=k.exports;d()(k,{VBtn:v["a"],VCard:m["a"],VCardText:p["c"],VCardTitle:p["d"],VContainer:f["a"],VFlex:b["a"],VForm:g["a"],VLayout:y["a"],VRangeSlider:V["a"]})},5963:function(t,e,a){"use strict";a("99af"),a("d81d"),a("a9e3");var i=a("2909"),s=a("ade3"),n=a("5530"),l=(a("33e9"),a("9a18")),r=a("80d2");e["a"]=l["a"].extend({name:"v-range-slider",props:{value:{type:Array,default:function(){return[0,0]}}},data:function(){return{activeThumb:null,lazyValue:this.value}},computed:{classes:function(){return Object(n["a"])({},l["a"].options.computed.classes.call(this),{"v-input--range-slider":!0})},internalValue:{get:function(){return this.lazyValue},set:function(t){var e=this,a=t.map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.roundValue(Math.min(Math.max(t,e.minValue),e.maxValue))}));if(a[0]>a[1]||a[1]<a[0]){if(null!==this.activeThumb){var i=1===this.activeThumb?0:1,s=this.$refs["thumb_".concat(i)];s.focus()}a=[a[1],a[0]]}this.lazyValue=a,Object(r["j"])(a,this.value)||this.$emit("input",a),this.validate()}},inputWidth:function(){var t=this;return this.internalValue.map((function(e){return(t.roundValue(e)-t.minValue)/(t.maxValue-t.minValue)*100}))}},methods:{getTrackStyle:function(t,e){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=this.vertical?this.$vuetify.rtl?"top":"bottom":this.$vuetify.rtl?"right":"left",r=this.vertical?"height":"width",o="calc(".concat(t,"% + ").concat(i,"px)"),u="calc(".concat(e,"% + ").concat(n,"px)");return a={transition:this.trackTransition},Object(s["a"])(a,l,o),Object(s["a"])(a,r,u),a},getIndexOfClosestValue:function(t,e){return Math.abs(t[0]-e)<Math.abs(t[1]-e)?0:1},genInput:function(){var t=this;return Object(r["h"])(2).map((function(e){var a=l["a"].options.methods.genInput.call(t);return a.data=a.data||{},a.data.attrs=a.data.attrs||{},a.data.attrs.value=t.internalValue[e],a.data.attrs.id="input-".concat(e?"max":"min","-").concat(t._uid),a}))},genTrackContainer:function(){var t=this,e=[],a=this.isDisabled?10:0,s=[{class:"v-slider__track-background",color:this.computedTrackColor,styles:[0,this.inputWidth[0],0,-a]},{class:this.isDisabled?"v-slider__track-background":"v-slider__track-fill",color:this.isDisabled?this.computedTrackColor:this.computedTrackFillColor,styles:[this.inputWidth[0],Math.abs(this.inputWidth[1]-this.inputWidth[0]),a,-2*a]},{class:"v-slider__track-background",color:this.computedTrackColor,styles:[this.inputWidth[1],Math.abs(100-this.inputWidth[1]),a,-a]}];return this.$vuetify.rtl&&s.reverse(),e.push.apply(e,Object(i["a"])(s.map((function(e){return t.$createElement("div",t.setBackgroundColor(e.color,{staticClass:e.class,style:t.getTrackStyle.apply(t,Object(i["a"])(e.styles))}))})))),this.$createElement("div",{staticClass:"v-slider__track-container",ref:"track"},e)},genChildren:function(){var t=this;return[this.genInput(),this.genTrackContainer(),this.genSteps(),Object(r["h"])(2).map((function(e){var a=t.internalValue[e],i=function(a){t.isFocused=!0,t.activeThumb=e,t.$emit("focus",a)},s=function(e){t.isFocused=!1,t.activeThumb=null,t.$emit("blur",e)},n=t.inputWidth[e],l=t.isActive&&t.activeThumb===e,r=t.isFocused&&t.activeThumb===e;return t.genThumbContainer(a,n,l,r,i,s,"thumb_".concat(e))}))]},reevaluateSelected:function(t){this.activeThumb=this.getIndexOfClosestValue(this.internalValue,t);var e="thumb_".concat(this.activeThumb),a=this.$refs[e];a.focus()},onSliderMouseDown:function(t){var e,a=this,i=this.parseMouseMove(t);this.reevaluateSelected(i),this.oldValue=this.internalValue,this.isActive=!0,(null==(e=t.target)?void 0:e.matches(".v-slider__thumb-container, .v-slider__thumb-container *"))?this.thumbPressed=!0:(window.clearTimeout(this.mouseTimeout),this.mouseTimeout=window.setTimeout((function(){a.thumbPressed=!0}),300));var s=!r["B"]||{passive:!0,capture:!0},n=!!r["B"]&&{passive:!0};"touches"in t?(this.app.addEventListener("touchmove",this.onMouseMove,n),Object(r["a"])(this.app,"touchend",this.onSliderMouseUp,s)):(this.onMouseMove(t),this.app.addEventListener("mousemove",this.onMouseMove,n),Object(r["a"])(this.app,"mouseup",this.onSliderMouseUp,s)),this.$emit("start",this.internalValue)},onSliderClick:function(t){if(!this.isActive){if(this.noClick)return void(this.noClick=!1);var e=this.parseMouseMove(t);this.reevaluateSelected(e),this.setInternalValue(e),this.$emit("change",this.internalValue)}},onMouseMove:function(t){var e=this.parseMouseMove(t);"mousemove"===t.type&&(this.thumbPressed=!0),this.activeThumb=this.getIndexOfClosestValue(this.internalValue,e),this.setInternalValue(e)},onKeyDown:function(t){if(null!==this.activeThumb){var e=this.parseKeyDown(t,this.internalValue[this.activeThumb]);null!=e&&(this.setInternalValue(e),this.$emit("change",this.internalValue))}},setInternalValue:function(t){var e=this;this.internalValue=this.internalValue.map((function(a,i){return i===e.activeThumb?t:Number(a)}))}}})},"9a18":function(t,e,a){"use strict";var i=a("ba0d");e["a"]=i["a"]}}]);